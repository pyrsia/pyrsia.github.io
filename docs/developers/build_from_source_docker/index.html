<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-developers/build_from_source_docker">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Pyrsia demo: build Docker images from source | Pyrsia.io</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://pyrsia.io/docs/developers/build_from_source_docker/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="robots" content="all"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Pyrsia demo: build Docker images from source | Pyrsia.io"><meta data-rh="true" name="description" content="Warning: This tutorial is aimed at developers actively contributing to the"><meta data-rh="true" property="og:description" content="Warning: This tutorial is aimed at developers actively contributing to the"><link data-rh="true" rel="icon" href="/img/favicon-32x32.png"><link data-rh="true" rel="canonical" href="https://pyrsia.io/docs/developers/build_from_source_docker/"><link data-rh="true" rel="alternate" href="https://pyrsia.io/docs/developers/build_from_source_docker/" hreflang="en"><link data-rh="true" rel="alternate" href="https://pyrsia.io/docs/developers/build_from_source_docker/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Pyrsia.io RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Pyrsia.io Atom Feed">



<!-- Google Tag Manager -->
    <script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-WZ4WCZ8",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>
    <!-- End Google Tag Manager -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.d4fbd3e3.css">
<link rel="preload" href="/assets/js/runtime~main.33377b86.js" as="script">
<link rel="preload" href="/assets/js/main.a5fcc9e9.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-pyrsia.svg" alt="Pyrsia logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-pyrsia.svg" alt="Pyrsia logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/vision/">Vision</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/tutorials/quick-installation/">Tutorials</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/community/get_involved/">Get Involved</a><a class="navbar__item navbar__link" href="/blog/">Blog</a><a href="https://github.com/pyrsia" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Documentation Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/tutorials/">End-user documentation</a><button aria-label="Toggle the collapsible sidebar category &#x27;End-user documentation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/developers/">Contributor documentation</a><button aria-label="Toggle the collapsible sidebar category &#x27;Contributor documentation&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/pyrsia-architecture-and-use-cases/">Pyrsia architecture and use cases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/developers/build_from_source_docker/">Pyrsia demo: build Docker images from source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/build_from_source_maven/">Pyrsia demo: build Maven images from source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/pyrsia-autonat/">Pyrsia AutoNAT Implementation (IETF STUN)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/setting_up_ide/">How to start and debug Pyrsia Node using IDE</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/community/">Community</a><button aria-label="Toggle the collapsible sidebar category &#x27;Community&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/sre/kubernetes-helm/">sre</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/developers/"><span itemprop="name">Contributor documentation</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Pyrsia demo: build Docker images from source</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Pyrsia demo: build Docker images from source</h1><blockquote><p><strong>Warning:</strong> This tutorial is aimed at developers actively contributing to the
Pyrsia codebase. If you simply want to use Pyrsia, please have a look at <a href="/docs/tutorials/docker/">Configure Docker to use Pyrsia</a></p></blockquote><p>This tutorial describes how to setup two Pyrsia nodes: one that acts as the authorized
node and builds Docker images from source and makes them available in the Pyrsia network,
and another one that acts as a regular Pyrsia node, retrieving the transparency
logs and the Docker image from the Pyrsia network. \</p><blockquote><p>Note: in the current prototype, the build pipeline does not actually build the
image, but downloads them from Docker Hub instead.</p></blockquote><p>The following scenario will be used:</p><ul><li>Setup an &#x27;authorized&#x27; node: node A</li><li>Setup a regular node: node B</li><li>Set up a build pipeline (prototype) for node A and configure it to use it.</li><li>Trigger a build from source for a given artifact</li><li>Wait for the build to finish in the build pipeline</li><li>Try to reach consensus with the other authorized nodes, which have to run the
same build and verify they produce the same build result. (There&#x27;s only one
authorized node, so this is &#x27;light&#x27; consensus for now)</li><li>Create a transparency log about the artifact publication</li><li>Publish the artifact on the p2p network</li><li>Inspect the transparency log on any node</li><li>Use docker pull using node B to pull the docker image from the Pyrsia network</li></ul><div class="mermaid" data-mermaid-src="sequenceDiagram
    participant User
    participant nodeB as Node B
    participant nodeA as Node A
    participant Build pipeline
    User-&gt;&gt;nodeA: Trigger build
    nodeA-&gt;&gt;Build pipeline: Request build
    nodeA-&gt;&gt;nodeA: Wait for build to finish
    nodeA-&gt;&gt;Build pipeline: Fetch build result
    nodeA-&gt;&gt;nodeA: Reach consensus and&lt;br&gt;create transparency log
    nodeA-&gt;&gt;nodeB: Distribute new logs
    User-&gt;&gt;nodeB: docker pull
    nodeB-&gt;&gt;nodeB: Check transparency logs
    nodeB-&gt;&gt;nodeA: Fetch artifacts
    nodeB-&gt;&gt;User: return docker image">sequenceDiagram
    participant User
    participant nodeB as Node B
    participant nodeA as Node A
    participant Build pipeline
    User-&gt;&gt;nodeA: Trigger build
    nodeA-&gt;&gt;Build pipeline: Request build
    nodeA-&gt;&gt;nodeA: Wait for build to finish
    nodeA-&gt;&gt;Build pipeline: Fetch build result
    nodeA-&gt;&gt;nodeA: Reach consensus and&lt;br&gt;create transparency log
    nodeA-&gt;&gt;nodeB: Distribute new logs
    User-&gt;&gt;nodeB: docker pull
    nodeB-&gt;&gt;nodeB: Check transparency logs
    nodeB-&gt;&gt;nodeA: Fetch artifacts
    nodeB-&gt;&gt;User: return docker image</div><p>See the <a href="/docs/developers/pyrsia-architecture-and-use-cases/">architecture and use-cases</a>
document for more information.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="compile-pyrsia">Compile Pyrsia<a class="hash-link" href="#compile-pyrsia" title="Direct link to heading">​</a></h2><p>Download a fresh copy of the codebase by cloning the repo or updating to the
HEAD of <code>main</code>.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/pyrsia/pyrsia.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Let&#x27;s call this folder <code>PYRSIA_HOME</code>. We will refer to this
name in the following steps.</p><p>Build binaries by running:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd $PYRSIA_HOME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cargo build --workspace</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See the <a href="/docs/community/get_involved/local_dev_setup/">Development Environment</a>
document for more information.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="run-pyrsia-node-a">Run Pyrsia node A<a class="hash-link" href="#run-pyrsia-node-a" title="Direct link to heading">​</a></h2><p>Now we will set the following env vars and start a pyrsia node:</p><ul><li>RUST_LOG: to make sure we can see all the debug logs</li><li>DEV_MODE: to make sure all non-existing directories are created on-the-fly</li><li>PYRSIA_ARTIFACT_PATH: pointing to a directory to store artifacts. optionally
remove this directory prior to starting Pyrsia if you want to start from an
empty state.</li></ul><p>For the purpose of this demo, let&#x27;s create temporary directories to clearly
separate our two nodes:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir nodeA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp target/debug/pyrsia_node nodeA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd nodeA</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And then run node A in listen-only and init mode, listening on a non-default port (because
we will run node B with default settings).</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">RUST_LOG=pyrsia=debug DEV_MODE=on \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./pyrsia_node --pipeline-service-endpoint http://localhost:8080 -p 7889 --listen-only --init-blockchain</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Watch out for this kind of log:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">INFO  pyrsia::network::event_loop &gt; Local node is listening on &quot;/ip4/127.0.0.1/tcp/56662/p2p/12D3KooWBgWeXNT1EKXo2omRhZVmkbvPgzZ5BcGjTfgKr586BSAn&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It contains the p2p multiaddress of node A, which we will need when starting node
B later in this tutorial.</p><p>As you can see, we specified the <code>--pipeline-service-endpoint</code> argument to point
to <code>http://localhost:8080</code>, which is where we will run our build pipeline prototype
(see below). In a production setup, the build pipeline needs to run on its
own isolated infrastructure.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="run-build-pipeline-prototype">Run build pipeline prototype<a class="hash-link" href="#run-build-pipeline-prototype" title="Direct link to heading">​</a></h2><p>In this demo, we use a build pipeline prototype. Eventually, Pyrsia will use
industry-standard build pipeline solutions. Integration with such solutions is
currently being investigated.</p><p>The most important features of the build pipeline are:</p><ul><li>it runs completely separate from the Pyrsia node</li><li>it exposes an interface so Pyrsia can start a build</li><li>it exposes an interface so Pyrsia can download the build output</li></ul><p>The current build pipeline prototype supports Maven and Docker builds.</p><p>Download or clone the <a href="https://github.com/tiainen/pyrsia_build_pipeline_prototype" target="_blank" rel="noopener noreferrer">prototype repo</a>
and run as follows (<code>jq</code> must be installed locally before):</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd pyrsia_build_pipeline_prototype</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUST_LOG=debug cargo run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>By default, this prototype listens on http port 8080. If you run it on a different
host or port, make sure to specify its location when starting the Pyrsia node
with <code>--pipeline-service-endpoint</code> (see above).</p><p>You will see the following output indicating that the build pipeline is ready
for use</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   Finished dev [unoptimized + debuginfo] target(s) in 1m 07s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Running `target/debug/pyrsia_build`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> INFO  actix_server::builder &gt; Starting 8 workers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> INFO  actix_server::server  &gt; Tokio runtime found; starting in existing Tokio runtime</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="authorize-node-a-as-a-build-node">Authorize node A as a build node<a class="hash-link" href="#authorize-node-a-as-a-build-node" title="Direct link to heading">​</a></h2><p>We will use the Pyrsia CLI to authorize node A as a build node.
Since node A is running on port 7889, we will have to edit the Pyrsia CLI config:</p><p>In a new terminal, while the Pyrsia nodes and the build pipeline prototype are
running, run:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd $PYRSIA_HOME/target/debug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./pyrsia config -e</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And enter the correct values or accept the default:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Enter host: [localhost]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter port: [7888]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7889</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter disk space to be allocated to pyrsia(Please enter with units ex: 10 GB): [10 GB]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Node configuration Saved !!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Next you&#x27;ll need to find out the peer id of node A. You can see that in its logs
or you can query the <code>/status</code> endpoint like this: (assuming you have <code>jq</code> installed)</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -s http://localhost:7889/status </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> jq  .peer_id</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once you know the peer id, authorize it like this:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./pyrsia authorize --peer </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">PEER_ID</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="run-pyrsia-node-b">Run Pyrsia node B<a class="hash-link" href="#run-pyrsia-node-b" title="Direct link to heading">​</a></h2><p>Now it&#x27;s time to run our regular node: node B. Let&#x27;s create another temporary
directory to clearly separate it from node A.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir nodeB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp target/debug/pyrsia_node nodeB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd nodeB</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And then run node B with default settings and connecting it to the multiaddress
of node A. This multiaddress can be found in the logs of node A (see section
&quot;Run Pyrsia node A&quot; above).</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">RUST_LOG=pyrsia=debug DEV_MODE=on \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./pyrsia_node --peer /ip4/127.0.0.1/tcp/56662/p2p/12D3KooWBgWeXNT1EKXo2omRhZVmkbvPgzZ5BcGjTfgKr586BSAn</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Important</strong>: do not simply copy/paste this command, the multiaddress on your
local system will be different.</p><p>At this point, we are running a Pyrsia network consisting of two nodes, so
let&#x27;s continue building an artifact and providing it on the network.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="trigger-a-build-from-source-for-a-given-artifact">Trigger a build from source for a given artifact<a class="hash-link" href="#trigger-a-build-from-source-for-a-given-artifact" title="Direct link to heading">​</a></h2><p>In this section we will trigger a build for <code>alpine:3.16</code> on node A.</p><p>We will use the Pyrsia CLI to trigger a build from source. We can send the build
request to node B, which will relay the request to node A, which is an authorized
build node. Node B, which is running on port 7888, we will have to edit this config
again:</p><p>In a new terminal, while the Pyrsia nodes and the build pipeline prototype are
running, run:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd $PYRSIA_HOME/target/debug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./pyrsia config -e --port 7888</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then trigger the build from source, like this:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./pyrsia build docker --image alpine:3.16.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The build trigger should return immediately providing a build ID:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Build request successfully handled. Build with ID c9ca3e57-aa84-4fab-a8be-381ab31e4916 has been started.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="wait-for-the-build-to-finish-in-the-build-pipeline">Wait for the build to finish in the build pipeline<a class="hash-link" href="#wait-for-the-build-to-finish-in-the-build-pipeline" title="Direct link to heading">​</a></h2><p>In the Pyrsia node logs of node A, you will see that a build has been started and
the Pyrsia node is now waiting for its result:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">INFO  pyrsia_registry &gt; 127.0.0.1:50187 &quot;POST /build/docker HTTP/1.1&quot; 200 &quot;-&quot; &quot;-&quot; 42.826041ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEBUG pyrsia::build_service::service &gt; Updated build info: BuildInfo { id: &quot;c9ca3e57-aa84-4fab-a8be-381ab31e4916&quot;, status: Running }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the build pipeline prototype you should see that build starting:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#######################################################</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Starting Docker build for:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   alpine:3.16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#######################################################</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Do note that the build pipeline prototype will not actually build the docker image,
but instead download it from Docker Hub.</p><p>Once the build has finished, the status request from the Pyrsia node will contain:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DEBUG pyrsia::build_service::event   &gt; Handle BuildEvent: Result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;build_id&quot;:&quot;c9ca3e57-aa84-4fab-a8be-381ab31e4916&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;build_trigger&quot;:&quot;FromSource&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;build_result&quot;:&quot;BuildResult&quot;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;package_type&quot;:&quot;Docker&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;package_specific_id&quot;:&quot;alpine:3.16&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;artifacts&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;BuildResultArtifact&quot;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;artifact_specific_id&quot;:&quot;alpine:3.16&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;artifact_location&quot;:&quot;/private/tmp/pyrsia/builds/c9ca3e57-aa84-4fab-a8be-381ab31e4916/1304f174557314a7ed9eddb4eab12fed12cb0cd9809e4c28f29af86979a3c870&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;artifact_hash&quot;:&quot;1304f174557314a7ed9eddb4eab12fed12cb0cd9809e4c28f29af86979a3c870&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;BuildResultArtifact&quot;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;artifact_specific_id&quot;:&quot;alpine@sha256:1304f174557314a7ed9eddb4eab12fed12cb0cd9809e4c28f29af86979a3c870&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;artifact_location&quot;:&quot;/private/tmp/pyrsia/builds/c9ca3e57-aa84-4fab-a8be-381ab31e4916/1304f174557314a7ed9eddb4eab12fed12cb0cd9809e4c28f29af86979a3c870&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;artifact_hash&quot;:&quot;1304f174557314a7ed9eddb4eab12fed12cb0cd9809e4c28f29af86979a3c870&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;BuildResultArtifact&quot;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;artifact_specific_id&quot;:&quot;alpine@sha256:213ec9aee27d8be045c6a92b7eac22c9a64b44558193775a1a7f626352392b49&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;artifact_location&quot;:&quot;/private/tmp/pyrsia/builds/c9ca3e57-aa84-4fab-a8be-381ab31e4916/213ec9aee27d8be045c6a92b7eac22c9a64b44558193775a1a7f626352392b49&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;artifact_hash&quot;:&quot;213ec9aee27d8be045c6a92b7eac22c9a64b44558193775a1a7f626352392b49&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;BuildResultArtifact&quot;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;artifact_specific_id&quot;:&quot;alpine@sha256:9c6f0724472873bb50a2ae67a9e7adcb57673a183cea8b06eb778dca859181b5&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;artifact_location&quot;:&quot;/private/tmp/pyrsia/builds/c9ca3e57-aa84-4fab-a8be-381ab31e4916/9c6f0724472873bb50a2ae67a9e7adcb57673a183cea8b06eb778dca859181b5&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;artifact_hash&quot;:&quot;9c6f0724472873bb50a2ae67a9e7adcb57673a183cea8b06eb778dca859181b5&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO  pyrsia::artifact_service::service &gt; Build with ID c9ca3e57-aa84-4fab-a8be-381ab31e4916 completed successfully for package type Docker and package specific ID alpine:3.16</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="try-to-reach-consensus-with-the-other-authorized-nodes">Try to reach consensus with the other authorized nodes<a class="hash-link" href="#try-to-reach-consensus-with-the-other-authorized-nodes" title="Direct link to heading">​</a></h2><p>Pyrsia node A will now try to reach consensus with the
other authorized nodes, but since we are only running one authorized node, this
step is implicit and node A will continue with the next steps: creating and
distributing the new transparency log.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-transparency-log-about-the-artifact-publication">Create a transparency log about the artifact publication<a class="hash-link" href="#create-a-transparency-log-about-the-artifact-publication" title="Direct link to heading">​</a></h2><p>When consensus has been reached, a transparency log is created for each built artifact.</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">INFO  pyrsia::artifact_service::service &gt; Adding artifact to transparency log: AddArtifactRequest { package_type: Docker, package_specific_id: &quot;alpine:3.16&quot;, num_artifacts: 4, package_specific_artifact_id: &quot;alpine:3.16&quot;, artifact_hash: &quot;1304f174557314a7ed9eddb4eab12fed12cb0cd9809e4c28f29af86979a3c870&quot; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pyrsia::transparency_log::log     &gt; Transparency log inserted into database with id: cc3dec20-8604-4d0a-8c18-ccb746769696</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO  pyrsia::artifact_service::service &gt; Transparency Log for build with ID c9ca3e57-aa84-4fab-a8be-381ab31e4916 successfully added. Adding artifact locally: TransparencyLog { id: &quot;cc3dec20-8604-4d0a-8c18-ccb746769696&quot;, package_type: Docker, package_specific_id: &quot;alpine:3.16&quot;, num_artifacts: 4, package_specific_artifact_id: &quot;alpine:3.16&quot;, artifact_hash: &quot;1304f174557314a7ed9eddb4eab12fed12cb0cd9809e4c28f29af86979a3c870&quot;, source_hash: &quot;&quot;, artifact_id: &quot;75c7bd83-1dd4-4666-a35f-e8c59b695e21&quot;, source_id: &quot;7ec06216-b2dc-4e5a-a90d-7875fb77b846&quot;, timestamp: 1660906467, operation: AddArtifact, node_id: &quot;64765410-136b-4332-a837-226bd062ba37&quot;, node_public_key: &quot;558b0373-a29d-40c9-8125-019fb74dda31&quot; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Example for <code>alpine:3.16</code>:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;id&quot;:&quot;cc3dec20-8604-4d0a-8c18-ccb746769696&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;package_type&quot;:&quot;Docker&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;package_specific_id&quot;:&quot;alpine:3.16&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;num_artifacts&quot;:4,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;package_specific_artifact_id&quot;:&quot;alpine:3.16&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;artifact_hash&quot;:&quot;1304f174557314a7ed9eddb4eab12fed12cb0cd9809e4c28f29af86979a3c870&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;source_hash&quot;:&quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;artifact_id&quot;:&quot;75c7bd83-1dd4-4666-a35f-e8c59b695e21&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;source_id&quot;:&quot;7ec06216-b2dc-4e5a-a90d-7875fb77b846&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;timestamp&quot;:1660906467,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;operation&quot;:&quot;AddArtifact&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;node_id&quot;:&quot;64765410-136b-4332-a837-226bd062ba37&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;node_public_key&quot;:&quot;558b0373-a29d-40c9-8125-019fb74dda31&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="publish-the-artifact-on-the-p2p-network">Publish the artifact on the p2p network<a class="hash-link" href="#publish-the-artifact-on-the-p2p-network" title="Direct link to heading">​</a></h2><p>As a final step in the build from source scenario, the artifacts are stored locally
on node A and provided on the p2p network.</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> INFO  pyrsia::artifact_service::service &gt; put_artifact with id: da341557-9150-4208-9474-f5884f799338</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> INFO  pyrsia::artifact_service::storage &gt; An artifact is being pushed to the artifact manager da341557-9150-4208-9474-f5884f799338</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> DEBUG pyrsia::network::client           &gt; p2p::Client::provide &quot;da341557-9150-4208-9474-f5884f799338&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now we are ready to use the published artifacts in our build workflow on node B
as shown in the sample section below.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="use-pyrsia-with-docker-pull">Use Pyrsia with Docker pull<a class="hash-link" href="#use-pyrsia-with-docker-pull" title="Direct link to heading">​</a></h2><p>Now that we have a Pyrsia network including a published Docker image, we can start
using Pyrsia with Docker.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-docker-desktop-to-use-node-b-as-registry-mirror">Configure Docker desktop to use node B as registry mirror<a class="hash-link" href="#configure-docker-desktop-to-use-node-b-as-registry-mirror" title="Direct link to heading">​</a></h3><p>On Windows or MacOS, open your Docker desktop installation -&gt; Settings -&gt;
Docker Engine where Docker allows you to set registry-mirrors. Configure node B
as a registry mirror by adding/editing the following in the configuration:</p><div class="language-jsonc codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsonc codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;registry-mirrors&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;http://192.168.0.110:7888&quot; // (IP address of host machine and port number of your Pyrsia node)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>On Linux, you&#x27;ll find this configuration in the file <code>/etc/docker/daemon.json</code>.</p><p>On MacOS or Windows, you can&#x27;t specify <code>localhost</code> because the request will
originate from the Docker Desktop VM, so you will need to specify the IP
address of host machine. On Linux you can use localhost.</p><p>You will need to restart Docker Desktop. Once restarted you should be able to
pull Docker images through Pyrsia.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pull-alpine-docker-image">Pull <code>alpine</code> docker image<a class="hash-link" href="#pull-alpine-docker-image" title="Direct link to heading">​</a></h2><p>First make sure Alpine is not in local Docker cache, then pull Alpine:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker rmi alpine:3.16.0 # remove alpine from local docker cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker pull alpine:3.16.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You&#x27;ll see this in the Pyrsia logs of node B:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">INFO  pyrsia_registry                      &gt; 192.168.0.227:60446 &quot;GET /v2/ HTTP/1.1&quot; 200 &quot;-&quot; &quot;docker/20.10.17 go/go1.17.11 git-commit/a89b842 kernel/5.10.124-linuxkit os/linux arch/arm64 UpstreamClient(Docker-Client/20.10.17-rd \(darwin\))&quot; 259.375µs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEBUG pyrsia::docker::v2::handlers::manifests &gt; Fetching manifest for alpine with tag: 3.16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO  pyrsia::artifact_service::storage       &gt; An artifact is being pulled from the artifact manager f6e32438-b23d-47be-908b-b6b97901a724</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEBUG pyrsia::network::client                 &gt; p2p::Client::list_providers &quot;f6e32438-b23d-47be-908b-b6b97901a724&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEBUG pyrsia::network::event_loop             &gt; Local Peer 12D3KooWNVVUAbLQnBWHvRS4Ad4aWpZyUTZMN5126KTgyYcubtpB is dialing Peer 12D3KooWHZRXJTjvYfP5A34bRLmeg9xmDFm46LUQJHHnhmemoUf6...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEBUG pyrsia::network::client                 &gt; p2p::Client::get_idle_peer() entered with 1 peers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEBUG pyrsia::network::idle_metric_protocol   &gt; p2p::idle_metric_protocol::write_request writing a request to peer for and idle metric</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEBUG pyrsia::network::idle_metric_protocol   &gt; p2p::idle_metric_protocol::read_response Reading response to idle metric request with value =[150, 62, 178, 249, 43, 85, 23, 66]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEBUG pyrsia::network::client                 &gt; p2p::Client::get_idle_peer() Pushing idle peer with value 25053298284.56112</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEBUG pyrsia::network::client                 &gt; p2p::Client::request_artifact PeerId(&quot;12D3KooWHZRXJTjvYfP5A34bRLmeg9xmDFm46LUQJHHnhmemoUf6&quot;): &quot;f6e32438-b23d-47be-908b-b6b97901a724&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEBUG pyrsia::network::artifact_protocol      &gt; Write ArtifactRequest: &quot;f6e32438-b23d-47be-908b-b6b97901a724&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO  pyrsia::artifact_service::service       &gt; put_artifact with id: f6e32438-b23d-47be-908b-b6b97901a724</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO  pyrsia::artifact_service::storage       &gt; An artifact is being pushed to the artifact manager f6e32438-b23d-47be-908b-b6b97901a724</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Indicating that the Alpine image was first pulled from the Pyrsia network and then
stored locally, so node B can now also participate in the p2p content distribution.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="inspect-the-transparency-logs">Inspect the transparency logs<a class="hash-link" href="#inspect-the-transparency-logs" title="Direct link to heading">​</a></h2><p>The transparency logs that were created as part of the build from source process,
can be inspected using the Pyrsia CLI on any node. You can change the CLI config
to use the default port 7888 again to inspect the logs on node B, or you can run
inspect-log without any changes to inspect the logs on node A:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./pyrsia inspect-log docker --image alpine:3.16.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This CLI command returns the transparency logs for all the Pyrsia artifacts that
make up the Docker image <code>alpine:3.16</code>:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;id&quot;: &quot;cc3dec20-8604-4d0a-8c18-ccb746769696&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;package_type&quot;: &quot;Docker&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;package_specific_id&quot;: &quot;alpine:3.16&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;num_artifacts&quot;: 4,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;package_specific_artifact_id&quot;: &quot;alpine:3.16&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;artifact_hash&quot;: &quot;1304f174557314a7ed9eddb4eab12fed12cb0cd9809e4c28f29af86979a3c870&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;source_hash&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;artifact_id&quot;: &quot;75c7bd83-1dd4-4666-a35f-e8c59b695e21&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;source_id&quot;: &quot;7ec06216-b2dc-4e5a-a90d-7875fb77b846&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;timestamp&quot;: 1660906467,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;operation&quot;: &quot;AddArtifact&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;node_id&quot;: &quot;64765410-136b-4332-a837-226bd062ba37&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;node_public_key&quot;: &quot;558b0373-a29d-40c9-8125-019fb74dda31&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;id&quot;: &quot;d88982b1-261b-4e3d-9eb2-dd549c40ac05&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;package_type&quot;: &quot;Docker&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;package_specific_id&quot;: &quot;alpine:3.16&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;num_artifacts&quot;: 4,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;package_specific_artifact_id&quot;: &quot;alpine@sha256:1304f174557314a7ed9eddb4eab12fed12cb0cd9809e4c28f29af86979a3c870&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;artifact_hash&quot;: &quot;1304f174557314a7ed9eddb4eab12fed12cb0cd9809e4c28f29af86979a3c870&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;source_hash&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;artifact_id&quot;: &quot;f2648155-b665-4567-9e3c-27af7cc3b9bb&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;source_id&quot;: &quot;0ca693f9-7c50-4448-9cd6-0d7a145fba14&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;timestamp&quot;: 1660906529,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;operation&quot;: &quot;AddArtifact&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;node_id&quot;: &quot;60b7d9ae-d5ba-4440-ab83-6c5638a18a45&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;node_public_key&quot;: &quot;4a873a2a-0e04-4540-b1bd-bccc0d721ed2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;id&quot;: &quot;f53f9cc6-6998-470a-8094-cae3fbc82412&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;package_type&quot;: &quot;Docker&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;package_specific_id&quot;: &quot;alpine:3.16&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;num_artifacts&quot;: 4,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;package_specific_artifact_id&quot;: &quot;alpine@sha256:213ec9aee27d8be045c6a92b7eac22c9a64b44558193775a1a7f626352392b49&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;artifact_hash&quot;: &quot;213ec9aee27d8be045c6a92b7eac22c9a64b44558193775a1a7f626352392b49&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;source_hash&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;artifact_id&quot;: &quot;dac2e42c-fd48-4487-b48c-34f5eac1f674&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;source_id&quot;: &quot;eed938e9-9cf8-4e1b-995f-6a6d1da6ef26&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;timestamp&quot;: 1660906589,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;operation&quot;: &quot;AddArtifact&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;node_id&quot;: &quot;1e3244e3-1fc5-429b-8cc6-43dbbebaccb2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;node_public_key&quot;: &quot;7d7d96c0-1b8b-4028-bb20-df9a45eeaa7f&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;id&quot;: &quot;cae2f5a7-22ec-4d22-86af-59e1f0239056&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;package_type&quot;: &quot;Docker&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;package_specific_id&quot;: &quot;alpine:3.16&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;num_artifacts&quot;: 4,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;package_specific_artifact_id&quot;: &quot;alpine@sha256:9c6f0724472873bb50a2ae67a9e7adcb57673a183cea8b06eb778dca859181b5&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;artifact_hash&quot;: &quot;9c6f0724472873bb50a2ae67a9e7adcb57673a183cea8b06eb778dca859181b5&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;source_hash&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;artifact_id&quot;: &quot;3fc0ac72-8f5e-41fe-8ab6-94c565ebc52c&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;source_id&quot;: &quot;4cb49c33-af4c-4c3a-8053-b771007a6720&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;timestamp&quot;: 1660906649,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;operation&quot;: &quot;AddArtifact&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;node_id&quot;: &quot;64d30c8e-d356-420c-ab87-e27687ca6f1d&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;node_public_key&quot;: &quot;57130e5d-d0dc-450b-b80d-966cb71210ef&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/pyrsia/pyrsia/blob/main/docs/developers/build_from_source_docker.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/developers/pyrsia-architecture-and-use-cases/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Pyrsia architecture and use cases</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/developers/build_from_source_maven/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Pyrsia demo: build Maven images from source</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#compile-pyrsia" class="table-of-contents__link toc-highlight">Compile Pyrsia</a></li><li><a href="#run-pyrsia-node-a" class="table-of-contents__link toc-highlight">Run Pyrsia node A</a></li><li><a href="#run-build-pipeline-prototype" class="table-of-contents__link toc-highlight">Run build pipeline prototype</a></li><li><a href="#authorize-node-a-as-a-build-node" class="table-of-contents__link toc-highlight">Authorize node A as a build node</a></li><li><a href="#run-pyrsia-node-b" class="table-of-contents__link toc-highlight">Run Pyrsia node B</a></li><li><a href="#trigger-a-build-from-source-for-a-given-artifact" class="table-of-contents__link toc-highlight">Trigger a build from source for a given artifact</a></li><li><a href="#wait-for-the-build-to-finish-in-the-build-pipeline" class="table-of-contents__link toc-highlight">Wait for the build to finish in the build pipeline</a></li><li><a href="#try-to-reach-consensus-with-the-other-authorized-nodes" class="table-of-contents__link toc-highlight">Try to reach consensus with the other authorized nodes</a></li><li><a href="#create-a-transparency-log-about-the-artifact-publication" class="table-of-contents__link toc-highlight">Create a transparency log about the artifact publication</a></li><li><a href="#publish-the-artifact-on-the-p2p-network" class="table-of-contents__link toc-highlight">Publish the artifact on the p2p network</a></li><li><a href="#use-pyrsia-with-docker-pull" class="table-of-contents__link toc-highlight">Use Pyrsia with Docker pull</a><ul><li><a href="#configure-docker-desktop-to-use-node-b-as-registry-mirror" class="table-of-contents__link toc-highlight">Configure Docker desktop to use node B as registry mirror</a></li></ul></li><li><a href="#pull-alpine-docker-image" class="table-of-contents__link toc-highlight">Pull <code>alpine</code> docker image</a></li><li><a href="#inspect-the-transparency-logs" class="table-of-contents__link toc-highlight">Inspect the transparency logs</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/">Overview</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/">Tutorial</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/tags/">Blog Categories</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://groups.google.com/g/pyrsia" target="_blank" rel="noopener noreferrer" class="footer__link-item">Google<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://cdeliveryfdn.slack.com/join/shared_invite/zt-1eryue9cw-9YpgrfIfsTcDS~hGHchURg" target="_blank" rel="noopener noreferrer" class="footer__link-item">CDF Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UClPQKloIElvJk7EdSST3W5g" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/PyrsiaOSS" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">About Us</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/#team">The Team</a></li><li class="footer__item"><a href="https://drive.google.com/file/d/13nOwuFGMDwC-S6mUkhSopC0sFMTo__uE/view?usp=sharing" target="_blank" rel="noopener noreferrer" class="footer__link-item">Technical Charter</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/pyrsia" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/pyrsia" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/icon-pyrsia-torch-175.svg" alt="Pyrsia Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="118" height="183"><img src="/img/icon-pyrsia-torch-175.svg" alt="Pyrsia Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="118" height="183"></div><div class="footer__copyright"><br><br>
                        <a href="https://cd.foundation" target="_blank"><img src="/img/logo-cdf.png" style="width:100%;max-width:400px;"></a><br>
                        Pyrsia is a Continuous Delivery Foundation project.
                        <br><br>
                      Copyright © Pyrsia a Series of LF Projects, LLC. <br>
                      For website terms of use, trademark policy and other project policies please see <a href="https://lfprojects.org">https://lfprojects.org</a>.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.33377b86.js"></script>
<script src="/assets/js/main.a5fcc9e9.js"></script>
<!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WZ4WCZ8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) --></body>
</html>