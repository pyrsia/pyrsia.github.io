<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-developers/demo">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Demo on two Ubuntu instances | Pyrsia.io</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://pyrsia.io/docs/developers/demo/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="robots" content="all"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Demo on two Ubuntu instances | Pyrsia.io"><meta data-rh="true" name="description" content="This demo tutorial is a first step in demonstrating Pyrsia&#x27;s capabilities."><meta data-rh="true" property="og:description" content="This demo tutorial is a first step in demonstrating Pyrsia&#x27;s capabilities."><link data-rh="true" rel="icon" href="/img/favicon-32x32.png"><link data-rh="true" rel="canonical" href="https://pyrsia.io/docs/developers/demo/"><link data-rh="true" rel="alternate" href="https://pyrsia.io/docs/developers/demo/" hreflang="en"><link data-rh="true" rel="alternate" href="https://pyrsia.io/docs/developers/demo/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Pyrsia.io RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Pyrsia.io Atom Feed">



<!-- Google Tag Manager -->
    <script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-WZ4WCZ8",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>
    <!-- End Google Tag Manager -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.d4fbd3e3.css">
<link rel="preload" href="/assets/js/runtime~main.d8234c0f.js" as="script">
<link rel="preload" href="/assets/js/main.4be85ba4.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-pyrsia.svg" alt="Pyrsia logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-pyrsia.svg" alt="Pyrsia logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/vision/">Vision</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/tutorials/quick-installation/">Tutorials</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/community/get_involved/">Get Involved</a><a class="navbar__item navbar__link" href="/blog/">Blog</a><a href="https://github.com/pyrsia" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Documentation Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/tutorials/">End-user tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;End-user tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/developers/">Developer&#x27;s Hub</a><button aria-label="Toggle the collapsible sidebar category &#x27;Developer&#x27;s Hub&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/pyrsia-architecture-and-use-cases/">Pyrsia architecture and use cases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/build_from_source_docker/">Pyrsia demo: build Docker images from source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/build_from_source_maven/">Pyrsia demo: build Maven images from source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/pyrsia-autonat/">Pyrsia AutoNAT Implementation (IETF STUN)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/pyrsia-with-docker/">Pyrsia and Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/maven_and_pyrsia/">Maven user scenarios</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/setting_up_ide/">How to start and debug Pyrsia Node using IDE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/developers/demo/">Demo on two Ubuntu instances</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/community/">Community</a><button aria-label="Toggle the collapsible sidebar category &#x27;Community&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/glossary/">Glossary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/social/">Join our Community</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/developers/"><span itemprop="name">Developer&#x27;s Hub</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Demo on two Ubuntu instances</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Demo on two Ubuntu instances</h1><p>This demo tutorial is a first step in demonstrating Pyrsia&#x27;s capabilities.
You will setup two Pyrsia nodes on two separate Ubuntu instances, wire them
together in a very small p2p network, and use the regular Docker client on
Ubuntu to pull images off the Pyrsia network. The Pyrsia nodes use Docker Hub
as a fallback mechanism in case the image is not yet available in the Pyrsia
network.</p><div class="mermaid" data-mermaid-src="flowchart TB
    subgraph Instance 1
      docker[Docker Client]--&gt;PyrsiaNode1[Pyrsia Node]
    end
    subgraph Instance 2
      docker2[Docker Client]--&gt;PyrsiaNode2[Pyrsia Node]
    end
    PyrsiaNode1--&gt;PyrsiaNode2
    PyrsiaNode2--&gt;PyrsiaNode1
    PyrsiaNode1--&gt;DockerHub[Docker Hub]">flowchart TB
    subgraph Instance 1
      docker[Docker Client]--&gt;PyrsiaNode1[Pyrsia Node]
    end
    subgraph Instance 2
      docker2[Docker Client]--&gt;PyrsiaNode2[Pyrsia Node]
    end
    PyrsiaNode1--&gt;PyrsiaNode2
    PyrsiaNode2--&gt;PyrsiaNode1
    PyrsiaNode1--&gt;DockerHub[Docker Hub]</div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">​</a></h2><ul><li><p>Two Ubuntu instances with public IPs that allow inbound TCP traffic on port 44000.
We will refer to them as:</p><ul><li><code>node1</code></li><li><code>node2</code></li></ul></li><li><p>We assume you have Docker installed. Follow these <a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener noreferrer">instructions</a> if you do not.</p></li></ul><blockquote><p>If you ran these steps before and if you want to start from a clean sheet, do this:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apt-get remove pyrsia</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm -rf /usr/local/var/pyrsia</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="demo-scenario">Demo Scenario<a class="hash-link" href="#demo-scenario" title="Direct link to heading">​</a></h2><p>This demo consists of several steps: (scroll down for instructions)</p><ol><li><a href="#install-and-configure-pyrsia">Installation and configuration</a><ul><li>Install and configure Pyrsia on <code>node1</code></li><li>Install and configure Pyrsia on <code>node2</code>, make it connect to <code>node1</code></li></ul></li><li><a href="#use-pyrsia">Docker pull on <code>node1</code></a><ul><li>image is not available in the Pyrsia network</li><li>image is requested from Docker Hub and stored locally, so it becomes
available in the Pyrsia network</li></ul></li><li><a href="#use-the-cli-to-check-the-node-status">Use the Pyrsia CLI to check <code>node1</code> status</a></li><li><a href="#use-pyrsia">Docker pull on <code>node2</code></a><ul><li>The same Docker image is pulled on <code>node2</code></li><li><code>node2</code> requests the image from the Pyrsia network, in this specific case: <code>node1</code>.</li></ul></li><li><a href="#use-the-cli-to-check-the-node-status">Use the Pyrsia CLI to check <code>node2</code> status</a></li><li><a href="#use-pyrsia">Docker pull on <code>node2</code></a><ul><li>The same Docker image is pulled again on <code>node2</code></li><li><code>node2</code> doesn&#x27;t have to download the image again</li></ul></li></ol><p>These are the steps in more detail:</p><div class="mermaid" data-mermaid-src="sequenceDiagram
participant User as User
participant Docker1 as Docker Daemon on node1
participant Node1 as Pyrsia Node on node1
participant PNW as Pyrsia Network
participant Docker2 as Docker Daemon on node2
participant Node2 as Pyrsia Node on node2
participant DockerHub as Docker Hub

User -&gt;&gt; Node1: Installs Pyrsia
activate User
note left of User: Installation
User -&gt;&gt; Node2: Installs Pyrsia and configures it to connect to node1

Node2 -&gt;&gt; Node1: Connects to peer node1 on port 44000&lt;br&gt;node1 and node2 now form the &#x27;Pyrsia Network&#x27;

deactivate User


User -&gt;&gt; Docker1: docker pull image
activate User
note left of User: Pull on node1
Docker1 -&gt;&gt; Node1: request image through the Docker&lt;br&gt;Registry API running inside the Pyrsia node on port 7888
Node1 -&gt;&gt; PNW: Node1 checks if the image is available&lt;br&gt;locally or on the Pyrsia network
Node1 -&gt;&gt; DockerHub: The image is not available and Node1&lt;br&gt;requests the image from Docker Hub
Node1 -&gt;&gt; PNW: Node1 stores the image locally&lt;br&gt;and announces it availability on the Pyrsia Network
Node1 -&gt;&gt; Docker1: The Pyrsia node responds with the requested image
Docker1 -&gt;&gt; User: docker pull is completed successfully
deactivate User

User -&gt;&gt; Node1: pyrsia status the user uses the CLI to ask the&lt;br&gt;status the CLI connects to the Pyrsia node on port 7888
activate User
deactivate User
note left of User: Check Pyrsia&lt;br&gt;node status

User -&gt;&gt; Docker2: docker pull image
activate User
note left of User: Pull on node2
Docker2 -&gt;&gt; Node2: request image through the Docker Registry API&lt;br&gt;running inside the Pyrsia node on port 7888

Node2 -&gt;&gt; PNW: Node2 checks if the image is available locally&lt;br&gt;or on the Pyrsia network&lt;br&gt;In this case, it is available on Node1

Node2 -&gt;&gt; Node1: Node2 connects to port 44000 on Node1&lt;br&gt;to request and download the artifact
Node2 -&gt;&gt; PNW: Node2 stores the artifact locally and announces itself&lt;br&gt;as a provider for this artifact as well.
Node2 -&gt;&gt; Docker2: The Pyrsia node responds with the requested image
Docker2 -&gt;&gt; User: docker pull is completed successfully
deactivate User

User -&gt;&gt; Node2: pyrsia node --status the user uses the CLI to ask the status&lt;br&gt;the CLI connects to the Pyrsia node on port 7888
activate User
deactivate User
note left of User: Check Pyrsia&lt;br&gt;node status


User -&gt;&gt; Docker2: docker pull image
activate User
note left of User: Pull again on node2
Docker2 -&gt;&gt; Node2: request image through the Docker Registry API&lt;br&gt;running inside the Pyrsia node on port 7888
Node2 -&gt;&gt; Docker2: The Pyrsia node responds with the requested image&lt;br&gt;because it was already available locally
Docker2 -&gt;&gt; User: Docker pull is completed successfully
deactivate User">sequenceDiagram
participant User as User
participant Docker1 as Docker Daemon on node1
participant Node1 as Pyrsia Node on node1
participant PNW as Pyrsia Network
participant Docker2 as Docker Daemon on node2
participant Node2 as Pyrsia Node on node2
participant DockerHub as Docker Hub

User -&gt;&gt; Node1: Installs Pyrsia
activate User
note left of User: Installation
User -&gt;&gt; Node2: Installs Pyrsia and configures it to connect to node1

Node2 -&gt;&gt; Node1: Connects to peer node1 on port 44000&lt;br&gt;node1 and node2 now form the &#x27;Pyrsia Network&#x27;

deactivate User


User -&gt;&gt; Docker1: docker pull image
activate User
note left of User: Pull on node1
Docker1 -&gt;&gt; Node1: request image through the Docker&lt;br&gt;Registry API running inside the Pyrsia node on port 7888
Node1 -&gt;&gt; PNW: Node1 checks if the image is available&lt;br&gt;locally or on the Pyrsia network
Node1 -&gt;&gt; DockerHub: The image is not available and Node1&lt;br&gt;requests the image from Docker Hub
Node1 -&gt;&gt; PNW: Node1 stores the image locally&lt;br&gt;and announces it availability on the Pyrsia Network
Node1 -&gt;&gt; Docker1: The Pyrsia node responds with the requested image
Docker1 -&gt;&gt; User: docker pull is completed successfully
deactivate User

User -&gt;&gt; Node1: pyrsia status the user uses the CLI to ask the&lt;br&gt;status the CLI connects to the Pyrsia node on port 7888
activate User
deactivate User
note left of User: Check Pyrsia&lt;br&gt;node status

User -&gt;&gt; Docker2: docker pull image
activate User
note left of User: Pull on node2
Docker2 -&gt;&gt; Node2: request image through the Docker Registry API&lt;br&gt;running inside the Pyrsia node on port 7888

Node2 -&gt;&gt; PNW: Node2 checks if the image is available locally&lt;br&gt;or on the Pyrsia network&lt;br&gt;In this case, it is available on Node1

Node2 -&gt;&gt; Node1: Node2 connects to port 44000 on Node1&lt;br&gt;to request and download the artifact
Node2 -&gt;&gt; PNW: Node2 stores the artifact locally and announces itself&lt;br&gt;as a provider for this artifact as well.
Node2 -&gt;&gt; Docker2: The Pyrsia node responds with the requested image
Docker2 -&gt;&gt; User: docker pull is completed successfully
deactivate User

User -&gt;&gt; Node2: pyrsia node --status the user uses the CLI to ask the status&lt;br&gt;the CLI connects to the Pyrsia node on port 7888
activate User
deactivate User
note left of User: Check Pyrsia&lt;br&gt;node status


User -&gt;&gt; Docker2: docker pull image
activate User
note left of User: Pull again on node2
Docker2 -&gt;&gt; Node2: request image through the Docker Registry API&lt;br&gt;running inside the Pyrsia node on port 7888
Node2 -&gt;&gt; Docker2: The Pyrsia node responds with the requested image&lt;br&gt;because it was already available locally
Docker2 -&gt;&gt; User: Docker pull is completed successfully
deactivate User</div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="install-and-configure-pyrsia">Install and configure Pyrsia<a class="hash-link" href="#install-and-configure-pyrsia" title="Direct link to heading">​</a></h2><blockquote><p>IMPORTANT: run the installation phase as <code>root</code>.</p></blockquote><p><strong>On both instances:</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-pyrsia">Install Pyrsia<a class="hash-link" href="#install-pyrsia" title="Direct link to heading">​</a></h3><p>Follow the instructions below or have a look at the latest <a href="https://pyrsia.io/docs/tutorials/quick-installation/" target="_blank" rel="noopener noreferrer">Pyrsia documentation</a>.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -sS https://pyrsia.io/install.sh | sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>or run the commands listed below:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Update system and install base tooling</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get install -y wget gnupg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Add the Pyrsia keys to verify packages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget -q -O - https://repo.pyrsia.io/repos/Release.key |  gpg --dearmor  &gt; pyrsia.gpg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo install -o root -g root -m 644 pyrsia.gpg /etc/apt/trusted.gpg.d/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm pyrsia.gpg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;deb https://repo.pyrsia.io/repos/nightly focal main&quot; | sudo tee -a /etc/apt/sources.list &gt; /dev/null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get install -y pyrsia</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="edit-configuration">Edit configuration<a class="hash-link" href="#edit-configuration" title="Direct link to heading">​</a></h3><p>Both nodes will already be listening on port 44000 when it starts.
Let&#x27;s now edit the configuration on node2 to connect to node1 at startup.</p><p><strong>On <code>node2</code>:</strong></p><p>Edit <code>/etc/systemd/system/multi-user.target.wants/pyrsia.service</code> and add
<code>--peer /ip4/public_ip_of_node1/tcp/44000</code> to the <code>ExecStart</code> line so it looks
like this:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ExecStart=/usr/bin/pyrsia_node --host 0.0.0.0 -L /ip4/0.0.0.0/tcp/44000 --peer /ip4/public_ip_of_node1/tcp/44000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will make sure <code>node2</code> connects to peer <code>node1</code> when it starts.</p><p>Reload the daemon configuration:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl daemon-reload</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Restart the Pyrsia node:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">service pyrsia restart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Check the daemon status:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">service pyrsia status</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should see something very similar to:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">● pyrsia.service - Pyrsia Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Loaded: loaded (/lib/systemd/system/pyrsia.service; enabled; vendor preset: enabled)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Active: active (running) since Wed 2022-03-23 14:29:55 UTC; 5min ago</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Main PID: 42619 (pyrsia_node)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Tasks: 11 (limit: 19189)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Memory: 3.4M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     CGroup: /system.slice/pyrsia.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             └─42619 /usr/bin/pyrsia_node -H 127.0.0.1 --peer /ip4/1.2.3.4/tcp/44000 -L /ip4/0.0.0.0/tcp/44000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-the-cli-to-check-the-node-status">Use the CLI to check the node status<a class="hash-link" href="#use-the-cli-to-check-the-node-status" title="Direct link to heading">​</a></h3><p>Check the node status:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pyrsia -s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should see something very similar to:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Connected Peers Count:       1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Artifacts Count:             3 {&quot;manifests&quot;: 1, &quot;blobs&quot;: 2}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Total Disk Space Allocated:  5.84 GB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Disk Space Used:             0.0002%</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>List the node&#x27;s peers:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pyrsia -l</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should see something very similar to:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Connected Peers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[&quot;12D3KooWMD9ynPTdvhWMcdX7mh23Au1QpVS3ekTCQzpRTtd1g6h3&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tail-the-log">Tail the log<a class="hash-link" href="#tail-the-log" title="Direct link to heading">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tail -f /var/log/syslog</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should see something very similar to:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Mar 23 14:37:08 demo-pyrsia-node-2 pyrsia_node[42678]:  DEBUG multistream_select::dialer_select &gt; Dialer: Proposed protocol: /ipfs/id/1.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Mar 23 14:37:08 demo-pyrsia-node-2 pyrsia_node[42678]:  DEBUG multistream_select::dialer_select &gt; Dialer: Received confirmation for protocol: /ipfs/id/1.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Mar 23 14:37:08 demo-pyrsia-node-2 pyrsia_node[42678]:  DEBUG libp2p_core::upgrade::apply       &gt; Successfully applied negotiated protocol</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Mar 23 14:37:08 demo-pyrsia-node-2 pyrsia_node[42678]: Identify::Received: 12D3KooWMD9ynPTdvhWMcdX7mh23Au1QpVS3ekTCQzpRTtd1g6h3; IdentifyInfo { public_key: Ed25519(PublicKey(compressed): a94721f6a984901ec913ca8fac3963103f9f5f45fa5c484e9df8db469ab1e), protocol_version: &quot;ipfs/1.0.0&quot;, agent_version: &quot;rust-libp2p/0.34.0&quot;, listen_addrs: [&quot;/ip4/1.1.1.1/tcp/44000&quot;, &quot;/ip4/127.0.0.1/tcp/44000&quot;, &quot;/ip4/10.128.0.14/tcp/44000&quot;, &quot;/ip4/172.17.0.1/tcp/44000&quot;], protocols: [&quot;/ipfs/id/1.0.0&quot;, &quot;/ipfs/id/push/1.0.0&quot;, &quot;/ipfs/kad/1.0.0&quot;, &quot;/file-exchange/1&quot;], observed_addr: &quot;/ip4/2.2.2.2/tcp/52012&quot; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Mar 23 14:37:08 demo-pyrsia-node-2 pyrsia_node[42678]:  DEBUG pyrsia::network::p2p  &gt; Identify::Received: adding address &quot;/ip4/34.66.158.102/tcp/44000&quot; for peer 12D3KooWMD9ynPTdvhWMcdX7mh23Au1QpVS3ekTCQzpRTtd1g6h3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Mar 23 14:37:08 demo-pyrsia-node-2 pyrsia_node[42678]:  INFO  pyrsia::network::handlers         &gt; Dialed &quot;/ip4/34.66.158.102/tcp/44000&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="use-pyrsia">Use Pyrsia<a class="hash-link" href="#use-pyrsia" title="Direct link to heading">​</a></h2><p>Keep the log tail from the installation phase running and open a new terminal
on both instances. (doesn’t have to be <code>root</code>)</p><p>First on <code>node1</code>, pull any Docker image:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker pull alpine</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>(make sure to remove it from the local Docker cache if you already pulled it
before: <code>docker rmi alpine</code>)</p><p>Look at the syslog to show what happened. Alternatively grep the syslog for ‘Step’.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat /var/log/syslog | grep Step</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Step 1: Does &quot;sha256:e9adb5357e84d853cc3eb08cd4d3f9bd6cebdb8a67f0415cc884be7b0202416d&quot; exist in the artifact manager?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Step 1: NO, &quot;sha256:e9adb5357e84d853cc3eb08cd4d3f9bd6cebdb8a67f0415cc884be7b0202416d&quot; does not exist in the artifact manager.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Step 3: Retrieving &quot;sha256:e9adb5357e84d853cc3eb08cd4d3f9bd6cebdb8a67f0415cc884be7b0202416d&quot; from docker.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Step 3: &quot;sha256:e9adb5357e84d853cc3eb08cd4d3f9bd6cebdb8a67f0415cc884be7b0202416d&quot; successfully stored locally from docker.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Final Step: &quot;sha256:e9adb5357e84d853cc3eb08cd4d3f9bd6cebdb8a67f0415cc884be7b0202416d&quot; successfully retrieved!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Step 3: &quot;sha256:3d243047344378e9b7136d552d48feb7ea8b6fe14ce0990e0cc011d5e369626a&quot; successfully stored locally from docker.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &gt; Final Step: &quot;sha256:3d243047344378e9b7136d552d48feb7ea8b6fe14ce0990e0cc011d5e369626a&quot; successfully retrieved!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It shows that Pyrsia didn’t have the image yet, but it fetched it from Docker Hub instead.</p><p>Next on <code>node2</code>, pull the same Docker image:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker pull alpine</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Inspect the syslog on <code>node2</code>, or grep for ‘Steps’:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Step 1: Does &quot;sha256:e9adb5357e84d853cc3eb08cd4d3f9bd6cebdb8a67f0415cc884be7b0202416d&quot; exist in the artifact manager?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Step 1: Does &quot;sha256:3d243047344378e9b7136d552d48feb7ea8b6fe14ce0990e0cc011d5e369626a&quot; exist in the artifact manager?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Step 1: NO, &quot;sha256:e9adb5357e84d853cc3eb08cd4d3f9bd6cebdb8a67f0415cc884be7b0202416d&quot; does not exist in the artifact manager.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Step 1: NO, &quot;sha256:3d243047344378e9b7136d552d48feb7ea8b6fe14ce0990e0cc011d5e369626a&quot; does not exist in the artifact manager.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Step 2: Does &quot;sha256:3d243047344378e9b7136d552d48feb7ea8b6fe14ce0990e0cc011d5e369626a&quot; exist in the Pyrsia network?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Step 2: Does &quot;sha256:e9adb5357e84d853cc3eb08cd4d3f9bd6cebdb8a67f0415cc884be7b0202416d&quot; exist in the Pyrsia network?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Step 2: YES, &quot;sha256:e9adb5357e84d853cc3eb08cd4d3f9bd6cebdb8a67f0415cc884be7b0202416d&quot; exists in the Pyrsia network.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Step 2: &quot;sha256:e9adb5357e84d853cc3eb08cd4d3f9bd6cebdb8a67f0415cc884be7b0202416d&quot; successfully stored locally from Pyrsia network.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Final Step: &quot;sha256:e9adb5357e84d853cc3eb08cd4d3f9bd6cebdb8a67f0415cc884be7b0202416d&quot; successfully retrieved!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Step 2: YES, &quot;sha256:3d243047344378e9b7136d552d48feb7ea8b6fe14ce0990e0cc011d5e369626a&quot; exists in the Pyrsia network.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Step 2: &quot;sha256:3d243047344378e9b7136d552d48feb7ea8b6fe14ce0990e0cc011d5e369626a&quot; successfully stored locally from Pyrsia network.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Final Step: &quot;sha256:3d243047344378e9b7136d552d48feb7ea8b6fe14ce0990e0cc011d5e369626a&quot; successfully retrieved!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This shows the image wasn&#x27;t available locally, but it was available in the
Pyrsia network, retrieved and stored locally.</p><p>Next, remove the image from the local docker cache, and retrieve it again:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker rmi alpine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker pull alpine</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Inspect the syslog on <code>node2</code> again:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Step 1: YES, &quot;sha256:e9adb5357e84d853cc3eb08cd4d3f9bd6cebdb8a67f0415cc884be7b0202416d&quot; exist in the artifact manager.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Final Step: &quot;sha256:3d243047344378e9b7136d552d48feb7ea8b6fe14ce0990e0cc011d5e369626a&quot; successfully retrieved!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Final Step: &quot;sha256:e9adb5357e84d853cc3eb08cd4d3f9bd6cebdb8a67f0415cc884be7b0202416d&quot; successfully retrieved!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It will show the local Pyrsia node already had this Docker image and didn’t
have to download it again. Inspect the Pyrsia node status again on both nodes:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pyrsia -s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should see something very similar to:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Connected Peers Count:       1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Artifacts Count:             3 {&quot;manifests&quot;: 1, &quot;blobs&quot;: 2}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Total Disk Space Allocated:  5.84 GB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Disk Space Used:             0.0002%</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/pyrsia/pyrsia/edit/main/docs/developers/demo.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/developers/setting_up_ide/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">How to start and debug Pyrsia Node using IDE</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/community/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Community</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#demo-scenario" class="table-of-contents__link toc-highlight">Demo Scenario</a></li><li><a href="#install-and-configure-pyrsia" class="table-of-contents__link toc-highlight">Install and configure Pyrsia</a><ul><li><a href="#install-pyrsia" class="table-of-contents__link toc-highlight">Install Pyrsia</a></li><li><a href="#edit-configuration" class="table-of-contents__link toc-highlight">Edit configuration</a></li><li><a href="#use-the-cli-to-check-the-node-status" class="table-of-contents__link toc-highlight">Use the CLI to check the node status</a></li><li><a href="#tail-the-log" class="table-of-contents__link toc-highlight">Tail the log</a></li></ul></li><li><a href="#use-pyrsia" class="table-of-contents__link toc-highlight">Use Pyrsia</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/">Overview</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/">Tutorial</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/tags/">Blog Categories</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://groups.google.com/g/pyrsia" target="_blank" rel="noopener noreferrer" class="footer__link-item">Google<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/cdeliveryfdn/shared_invite/zt-1eryue9cw-9YpgrfIfsTcDS~hGHchURg" target="_blank" rel="noopener noreferrer" class="footer__link-item">CDF Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UClPQKloIElvJk7EdSST3W5g" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/PyrsiaOSS" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">About Us</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/#team">The Team</a></li><li class="footer__item"><a href="https://drive.google.com/file/d/13nOwuFGMDwC-S6mUkhSopC0sFMTo__uE/view?usp=sharing" target="_blank" rel="noopener noreferrer" class="footer__link-item">Technical Charter</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/pyrsia" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/pyrsia" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/icon-pyrsia-torch-175.svg" alt="Pyrsia Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="118" height="183"><img src="/img/icon-pyrsia-torch-175.svg" alt="Pyrsia Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="118" height="183"></div><div class="footer__copyright"><br><br>
                        <a href="https://cd.foundation" target="_blank"><img src="/img/logo-cdf.png" style="width:100%;max-width:400px;"></a><br>
                        Pyrsia is a Continuous Delivery Foundation project.
                        <br><br>
                      Copyright © Pyrsia a Series of LF Projects, LLC. <br>
                      For website terms of use, trademark policy and other project policies please see <a href="https://lfprojects.org">https://lfprojects.org</a>.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d8234c0f.js"></script>
<script src="/assets/js/main.4be85ba4.js"></script>
<!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WZ4WCZ8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) --></body>
</html>