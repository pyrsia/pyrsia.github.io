"use strict";(self.webpackChunkpyrsia=self.webpackChunkpyrsia||[]).push([[5156],{89487:function(e,t,a){a.r(t),a.d(t,{assets:function(){return o},contentTitle:function(){return c},default:function(){return h},frontMatter:function(){return n},metadata:function(){return p},toc:function(){return k}});var s=a(87462),i=a(63366),l=(a(67294),a(3905)),r=(a(8209),["components"]),n={custom_edit_url:"https://github.com/pyrsia/pyrsia/blob/main/docs/developers/release_process.md"},c="Creating a Release for Pyrsia",p={unversionedId:"developers/release_process",id:"developers/release_process",title:"Creating a Release for Pyrsia",description:"Once the team decides to tag a release please use the following steps to ensure all parts of the service are updated.",source:"@site/docs/developers/release_process.md",sourceDirName:"developers",slug:"/developers/release_process",permalink:"/docs/developers/release_process",draft:!1,editUrl:"https://github.com/pyrsia/pyrsia/blob/main/docs/developers/release_process.md",tags:[],version:"current",frontMatter:{custom_edit_url:"https://github.com/pyrsia/pyrsia/blob/main/docs/developers/release_process.md"},sidebar:"tutorialSidebar",previous:{title:"Pre-release checks",permalink:"/docs/developers/prerelease_manual_tests"},next:{title:"Community",permalink:"/docs/community/"}},o={},k=[{value:"Before tagging the release in github",id:"before-tagging-the-release-in-github",level:2},{value:"Tagging the release",id:"tagging-the-release",level:2},{value:"Testing the release",id:"testing-the-release",level:2},{value:"Deployment",id:"deployment",level:2},{value:"Post-release",id:"post-release",level:2},{value:"Outreach",id:"outreach",level:2}],m={toc:k};function h(e){var t=e.components,a=(0,i.Z)(e,r);return(0,l.kt)("wrapper",(0,s.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"creating-a-release-for-pyrsia"},"Creating a Release for Pyrsia"),(0,l.kt)("p",null,"Once the team decides to tag a release please use the following steps to ensure all parts of the service are updated."),(0,l.kt)("p",null,"To track this release, create a new issue titled ",(0,l.kt)("inlineCode",{parentName:"p"},"Release vx.x.x")," and copy paste the below sections as the description.\nNext, follow and check the boxes in the issue as you move forward."),(0,l.kt)("h2",{id:"before-tagging-the-release-in-github"},"Before tagging the release in github"),(0,l.kt)("ul",{className:"contains-task-list"},(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Check and make sure the version in Cargo.toml and rust.yml is correct in the main branch"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Run the ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/pyrsia/pyrsia-integration-tests/actions"},"integration tests")," on the main branch and record the output in the comments of the release issue. Ensure there are no failures - also ensure there is no flakiness observed."),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Run ",(0,l.kt)("a",{parentName:"li",href:"/docs/developers/prerelease_manual_tests"},"manual confidence tests")," using a local build from the main branch")),(0,l.kt)("h2",{id:"tagging-the-release"},"Tagging the release"),(0,l.kt)("p",null,"Once all the above steps are completed and verified to be success, start the release procedure:"),(0,l.kt)("ul",{className:"contains-task-list"},(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Go the ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/pyrsia/pyrsia/releases"},"GitHub releases")," and ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/pyrsia/pyrsia/releases/new"},"Draft a new release")),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Select target branch ",(0,l.kt)("inlineCode",{parentName:"li"},"main")),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Click Choose a tag and type the tagname starting with a ",(0,l.kt)("inlineCode",{parentName:"li"},"v")," e.g. ",(0,l.kt)("inlineCode",{parentName:"li"},"v0.2.2"),' - select "Create new tag on publish"'),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Name the release: start with the tag, but make sure the title already includes a quick summary of the most important change(s)"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Click generate release notes. This will generate the technical release notes of all changes."),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Summarize the changes in a more readable list above the technical release notes - see ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/pyrsia/pyrsia/releases/tag/v0.2.1"},"0.2.1 as an example")),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Check the box for 'Set as pre-release' (for now)"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Make sure 'Set as latest release' is NOT checked (for now)"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ",'Hit "Publish release" and wait for the workflow to finish')),(0,l.kt)("h2",{id:"testing-the-release"},"Testing the release"),(0,l.kt)("ul",{className:"contains-task-list"},(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Deploy to nightly cluster"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Run installers + manual confidence tests connecting to nightly",(0,l.kt)("ul",{parentName:"li",className:"contains-task-list"},(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Linux"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","MacOS"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Windows"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Docker")))),(0,l.kt)("h2",{id:"deployment"},"Deployment"),(0,l.kt)("ul",{className:"contains-task-list"},(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Make sure ",(0,l.kt)("a",{parentName:"li",href:"https://repo.pyrsia.io/repos/nightly/pool/main/p/pyrsia/"},"apt repo")," and ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/pyrsia/homebrew-pyrsia"},"brew repo")," contain the correct latest release"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Upload windows MSI to github release"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Deploy the production authorized nodes with this release"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Run installers + ",(0,l.kt)("a",{parentName:"li",href:"/docs/developers/postrelease_manual_tests"},"manual confidence tests")," connecting to production",(0,l.kt)("ul",{parentName:"li",className:"contains-task-list"},(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Linux"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","MacOS"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Windows"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Docker")))),(0,l.kt)("h2",{id:"post-release"},"Post-release"),(0,l.kt)("ul",{className:"contains-task-list"},(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Edit the ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/pyrsia/pyrsia/releases"},"GitHub release")," and uncheck 'Set as pre-release' and check 'Set as latest release'."),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Update documentation to point to the latest released version"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Update the version number to prepare for the next release",(0,l.kt)("ul",{parentName:"li",className:"contains-task-list"},(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Make sure you update the version in ",(0,l.kt)("inlineCode",{parentName:"li"},"Cargo.toml")),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Update github actions with the new version number eg. ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/pyrsia/pyrsia/pull/1349/files"},"https://github.com/pyrsia/pyrsia/pull/1349/files")),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Create a PR with the version change and run it through the github actions to ensure nothing fails."),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Verify that the rust toolchain version is set to the version we would like to release this version. Since 0.2.2 this is captured in one place - at the top of ",(0,l.kt)("inlineCode",{parentName:"li"},"Cargo.toml")),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Merge the PR to the main branch")))),(0,l.kt)("h2",{id:"outreach"},"Outreach"),(0,l.kt)("ul",{className:"contains-task-list"},(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Add a blog to promote this release - like ",(0,l.kt)("a",{parentName:"li",href:"https://pyrsia.io/blog/2022/11/30/pyrsia-0.2.1-released/"},"https://pyrsia.io/blog/2022/11/30/pyrsia-0.2.1-released/"))))}h.isMDXComponent=!0}}]);