(self.webpackChunkpyrsia=self.webpackChunkpyrsia||[]).push([[7992],{29515:function(e,t,a){"use strict";a.r(t),a.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return h},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return d}});var n=a(87462),i=a(63366),r=(a(67294),a(3905)),o=(a(8209),["components"]),s={custom_edit_url:"https://github.com/pyrsia/pyrsia/blob/main/docs/developers/pyrsia-architecture-and-use-cases.md",sidebar_position:0},l="Pyrsia architecture and use cases",c={unversionedId:"developers/pyrsia-architecture-and-use-cases",id:"developers/pyrsia-architecture-and-use-cases",title:"Pyrsia architecture and use cases",description:"Warning: This document is a work-in-progress.",source:"@site/docs/developers/pyrsia-architecture-and-use-cases.md",sourceDirName:"developers",slug:"/developers/pyrsia-architecture-and-use-cases",permalink:"/docs/developers/pyrsia-architecture-and-use-cases",draft:!1,editUrl:"https://github.com/pyrsia/pyrsia/blob/main/docs/developers/pyrsia-architecture-and-use-cases.md",tags:[],version:"current",sidebarPosition:0,frontMatter:{custom_edit_url:"https://github.com/pyrsia/pyrsia/blob/main/docs/developers/pyrsia-architecture-and-use-cases.md",sidebar_position:0},sidebar:"tutorialSidebar",previous:{title:"Contributor documentation",permalink:"/docs/developers/"},next:{title:"Pyrsia demo: build Docker images from source",permalink:"/docs/developers/build_from_source_docker"}},p={},d=[{value:"Concepts used in this document",id:"concepts-used-in-this-document",level:2},{value:"Introduction",id:"introduction",level:2},{value:"High level user stories",id:"high-level-user-stories",level:2},{value:"Pyrsia network overview",id:"pyrsia-network-overview",level:2},{value:"Pyrsia node architecture",id:"pyrsia-node-architecture",level:2},{value:"Package ecosystem integrations",id:"package-ecosystem-integrations",level:3},{value:"Pyrsia CLI API",id:"pyrsia-cli-api",level:3},{value:"Artifact Service",id:"artifact-service",level:3},{value:"p2p",id:"p2p",level:3},{value:"Transparency Log Service",id:"transparency-log-service",level:3},{value:"Blockchain",id:"blockchain",level:3},{value:"Verification service",id:"verification-service",level:3},{value:"Build service",id:"build-service",level:3},{value:"Technical stories and details",id:"technical-stories-and-details",level:2}],u={toc:d};function h(e){var t=e.components,s=(0,i.Z)(e,o);return(0,r.kt)("wrapper",(0,n.Z)({},u,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"pyrsia-architecture-and-use-cases"},"Pyrsia architecture and use cases"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Warning:")," This document is a work-in-progress.")),(0,r.kt)("h2",{id:"concepts-used-in-this-document"},"Concepts used in this document"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Pyrsia network: a peer-to-peer network of interconnected nodes exchanging software\npackages and transparency logs."),(0,r.kt)("li",{parentName:"ul"},"Node: a process participating the Pyrsia network, either as an authorized node\nor a regular node."),(0,r.kt)("li",{parentName:"ul"},"Authorized node: a Node authorized to participate in the consensus algorithm to\nverify transactions"),(0,r.kt)("li",{parentName:"ul"},"Regular node: a Node using the network to download and validate software packages"),(0,r.kt)("li",{parentName:"ul"},"Transparency log: information about every operation on the Pyrsia network, like\nadding or removing an artifact, but also about adding or removing authorized nodes.\nA transparency log is stored as the payload of a blockchain transaction."),(0,r.kt)("li",{parentName:"ul"},"Blockchain : a distributed ledger including all the transactions in the Pyrsia\nnetwork"),(0,r.kt)("li",{parentName:"ul"},"Block: a record of the distributed ledger including one or more transactions"),(0,r.kt)("li",{parentName:"ul"},"Transaction: a record in the block, containing the transparency log as the payload."),(0,r.kt)("li",{parentName:"ul"},"Consensus: consensus establishes the agreement between authorized nodes that a\ntransaction is valid."),(0,r.kt)("li",{parentName:"ul"},"Artifact: a single file that can be retrieved from the Pyrsia network. It does\nnot necessarily coincide with package specific artifacts."),(0,r.kt)("li",{parentName:"ul"},"Package ecosystem: a specific package ecosystem that Pyrsia supports. e.g. Java,\nDocker, ..."),(0,r.kt)("li",{parentName:"ul"},"Package type: the type of a package in a specific package ecosystem. e.g. jars\nfor Java, Docker images for Docker, ..."),(0,r.kt)("li",{parentName:"ul"},"PSID: a package type specific artifact ID."),(0,r.kt)("li",{parentName:"ul"},"Authorized node admin: the person who can administer an authorized node")),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"The Pyrsia network's first aim is to distribute software packages without central\nauthority. Instead, it relies on a set of designated authorized nodes that reach\nconsensus about the publication of software packages."),(0,r.kt)("p",null,"Those software packages originate from a source repository with build instructions.\nAll authorized nodes perform the necessary build steps and reach consensus if the\nproduced build is identical (or at least identical for the parts that matter)."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note"),": The Docker build pipeline will leverage Docker Hub builds for the\nofficial Docker images."),(0,r.kt)("p",null,"The Pyrsia network also distributes transparency logs so every node in the network\ncan verify a downloaded artifact."),(0,r.kt)("h2",{id:"high-level-user-stories"},"High level user stories"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"As a user I can use Docker client to pull an official Docker image from the Pyrsia\nnetwork."),(0,r.kt)("li",{parentName:"ul"},"As a user I can use a Java build tool like Maven to download Maven artifacts from\nthe Pyrsia network."),(0,r.kt)("li",{parentName:"ul"},"As a user I can use the Pyrsia CLI to show the transparency log based on search\nparameters."),(0,r.kt)("li",{parentName:"ul"},"New authorized nodes can be added to the Pyrsia network."),(0,r.kt)("li",{parentName:"ul"},"As a user I can request a build from source of a specific artifact, so it is\nadded to the Pyrsia network.")),(0,r.kt)("h2",{id:"pyrsia-network-overview"},"Pyrsia network overview"),(0,r.kt)("p",null,"The following diagram shows three authorized nodes, each with their own build pipelines.\nIn a real network, we expect tens or even hundreds of authorized nodes."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Pyrsia component diagram",src:a(81054).Z,width:"1481",height:"1299"})),(0,r.kt)("p",null,"The next diagram show the same authorized nodes. But next to those, a larger number\nof regular nodes have now joined the network as well. While regular nodes don't\nparticipate in the consensus mechanism, they do participate in the distribution\nof artifacts and transparency logs. They play a crucial role in the performance\nof the Pyrsia network."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Pyrsia component diagram",src:a(55270).Z,width:"1481",height:"1299"})),(0,r.kt)("h2",{id:"pyrsia-node-architecture"},"Pyrsia node architecture"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Pyrsia component diagram",src:a(57934).Z,width:"1640",height:"1812"})),(0,r.kt)("h3",{id:"package-ecosystem-integrations"},"Package ecosystem integrations"),(0,r.kt)("p",null,"A Pyrsia node contains several integrations for specific package ecosystems\nlike Docker or Maven. The ecosystem integrations allow the existing tooling of a\nspecific package type to seamlessly integrate with Pyrsia. e.g. the Docker\nrepository service implements a subset of the Docker Registry API or the Java\nrepository service implements a subset of the Maven repository API."),(0,r.kt)("p",null,"The end goal of a such an integration service is always a frictionless integration\nof Pyrsia in the developer's workflow."),(0,r.kt)("p",null,"Different package type integrations deal with package specific details in a different\nway. But all must follow the same logic:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Handle incoming requests from the package type specific clients (e.g. Docker\nclient, Maven client, ...)"),(0,r.kt)("li",{parentName:"ul"},"Use the artifact service to retrieve the artifact. (The artifact service\ncontains all the logic to retrieve (locally or from the p2p network) and validate\nthe artifact.)")),(0,r.kt)("h3",{id:"pyrsia-cli-api"},"Pyrsia CLI API"),(0,r.kt)("p",null,"The Pyrsia CLI API is the entry point into the Pyrsia node for the Pyrsia\ncommand line tool. It supports all kinds of management operations and inspecting\ntransparency logs."),(0,r.kt)("p",null,"The Pyrsia CLI API has functions to:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"retrieve and change node configuration"),(0,r.kt)("li",{parentName:"ul"},"request status information about the local artifact storage"),(0,r.kt)("li",{parentName:"ul"},"request status information about the p2p connection status"),(0,r.kt)("li",{parentName:"ul"},"request the addition of a new authorized node (",(0,r.kt)("em",{parentName:"li"},"Authorized nodes only"),")"),(0,r.kt)("li",{parentName:"ul"},"request starting a new build from source")),(0,r.kt)("h3",{id:"artifact-service"},"Artifact Service"),(0,r.kt)("p",null,"The artifact service is the component that handles everything related to Pyrsia\nartifacts. It allows artifacts to be retrieved, and it allows artifacts to be\nadded to the Pyrsia network, by triggering a build from source."),(0,r.kt)("p",null,"The artifact service provides these functions:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"get an artifact based on the package type and a package specific\nartifact ID (PSID). \\\nthe artifact service implements this as follows:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"get the latest available ",(0,r.kt)("inlineCode",{parentName:"li"},"add_artifact"),"transparency log (if any) for this artifact\nfrom the transparency log service."),(0,r.kt)("li",{parentName:"ul"},"the transparency log contains the (Pyrsia) ",(0,r.kt)("inlineCode",{parentName:"li"},"artifact_id")," which is used to retrieve\nthe actual artifact file"),(0,r.kt)("li",{parentName:"ul"},"if the file is available locally, it is used"),(0,r.kt)("li",{parentName:"ul"},"if the file isn't available locally, it is retrieved using the ",(0,r.kt)("inlineCode",{parentName:"li"},"p2p")," component."),(0,r.kt)("li",{parentName:"ul"},"the file is then checked by calculating its hash and comparing it to the\n",(0,r.kt)("inlineCode",{parentName:"li"},"artifact_hash")," stored in the transparency log."),(0,r.kt)("li",{parentName:"ul"},"if the hashes match the bytes of the file, they are returned to the caller of\nthe artifact service, otherwise an error is returned."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"request a build from source for a specific package type and a package\nspecific artifact ID (PSID). \\\nthe artifact service implements this as follows:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"start a build using the build service, and wait for its result."),(0,r.kt)("li",{parentName:"ul"},"when the build is finished:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"temporary hold the build result"),(0,r.kt)("li",{parentName:"ul"},"and call the transparency log including the package type, PSID and\nthe hashes from the build result to add an ",(0,r.kt)("inlineCode",{parentName:"li"},"add_artifact")," transparency log.\nthis call is asynchronous (because consensus will need to be reached about\nthe transaction), so the artifact service will wait from a callback from\nthe transparency log"),(0,r.kt)("li",{parentName:"ul"},"when the call is received and the ",(0,r.kt)("inlineCode",{parentName:"li"},"add_artifact")," succeeded, the artifact\nservice stores the artifact locally in a file named ",(0,r.kt)("inlineCode",{parentName:"li"},"artifact_id")," and the\nsource in a file named ",(0,r.kt)("inlineCode",{parentName:"li"},"source_id"),". Both files are provided on the p2p\nnetwork using the ",(0,r.kt)("inlineCode",{parentName:"li"},"p2p")," component.")))))),(0,r.kt)("h3",{id:"p2p"},"p2p"),(0,r.kt)("p",null,"The p2p component offers an interface to the peer-to-peer network. This component\nheavily relies on libp2p and bundles everything that is required to set up and\nmaintain a p2p network between Pyrsia nodes, allowing them to exchange messages,\nartifacts and transparency logs."),(0,r.kt)("h3",{id:"transparency-log-service"},"Transparency Log Service"),(0,r.kt)("p",null,"This component is used by the artifact service to store and retrieve transparency\nlog information about an artifact."),(0,r.kt)("p",null,"It uses the blockchain component to retrieve transparency logs and to reach consensus\non the publication of new transparency logs. It uses a local database to store\nand index transparency log information for easy access."),(0,r.kt)("p",null,"The transparency log service provides these functions:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"add_artifact"),": to add a transparency log, logging the addition of an artifact\nto the Pyrsia network. \\\nIt follows this procedure:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"create a ",(0,r.kt)("inlineCode",{parentName:"li"},"TransparencyLog")," including",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"operation: ",(0,r.kt)("inlineCode",{parentName:"li"},"add_artifact")),(0,r.kt)("li",{parentName:"ul"},"package type: provided by the ",(0,r.kt)("inlineCode",{parentName:"li"},"AddArtifactRequest")),(0,r.kt)("li",{parentName:"ul"},"package type specific artifact ID (PSID): provided by the ",(0,r.kt)("inlineCode",{parentName:"li"},"AddArtifactRequest")),(0,r.kt)("li",{parentName:"ul"},"timestamp: now"),(0,r.kt)("li",{parentName:"ul"},"artifact_hash: provided by the ",(0,r.kt)("inlineCode",{parentName:"li"},"AddArtifactRequest")),(0,r.kt)("li",{parentName:"ul"},"source_bash: provided by the ",(0,r.kt)("inlineCode",{parentName:"li"},"AddArtifactRequest")),(0,r.kt)("li",{parentName:"ul"},"artifact_id: Pyrsia specific id of the artifact (UUID to be generated by\nthe Transparency Log Service at the time of transparency log creation)"),(0,r.kt)("li",{parentName:"ul"},"source_id: Pyrsia specific id of the artifact's source (UUID to be generated\nby the Transparency Log Service at the time of transparency log creation)"),(0,r.kt)("li",{parentName:"ul"},"the transparency log is provided as the payload of the ",(0,r.kt)("inlineCode",{parentName:"li"},"add_transaction"),"\nmethod of the blockchain component. the service now waits for the blockchain\ncomponent to reach consensus with the other authorized nodes."),(0,r.kt)("li",{parentName:"ul"},"when consensus is reached, the transparency log service will be notified\nby the blockchain component, which will:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"store the transparency log in the transparency log database"),(0,r.kt)("li",{parentName:"ul"},"notify the caller of ",(0,r.kt)("inlineCode",{parentName:"li"},"add_artifact")))))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"retrieving the latest ",(0,r.kt)("inlineCode",{parentName:"p"},"add_artifact")," transparency log"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"this function takes the package type and PSID as input \\\nand follows this procedure:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"search the transparency log database for all transparency log with",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"operation: add_artifact or remove_artifact"),(0,r.kt)("li",{parentName:"ul"},"package_type: given as a parameter to this method"),(0,r.kt)("li",{parentName:"ul"},"package_type_id: the PSID also given as a parameter to this method"),(0,r.kt)("li",{parentName:"ul"},"and sort on timestamp descending"))),(0,r.kt)("li",{parentName:"ul"},"if the latest transparency log is remove_artifact or no transparency log\nis found, an error is returned"),(0,r.kt)("li",{parentName:"ul"},"otherwise the latest transparency log is returned"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"retrieving current authorized nodes"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"this function is mainly used by the blockchain component to find out who\nthe other authorized nodes are."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"searching transparency logs (for inspection)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"adding a transparency log to add another authorized node")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"adding a transparency log to remove an authorized node")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"adding a transparency log to remove an artifact"))),(0,r.kt)("h3",{id:"blockchain"},"Blockchain"),(0,r.kt)("p",null,"This component offers an interface to store and retrieve immutable transparency\nlogs, and distribute them across all peers."),(0,r.kt)("p",null,"Before transparency logs can be added to the blockchain, consensus needs to be\nreached using a fault-tolerant consensus algorithm, because:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A majority of (authorized) nodes must be able to agree to the same result"),(0,r.kt)("li",{parentName:"ul"},"A small number of faulty (authorized) nodes must not be able to influence the\nresult"),(0,r.kt)("li",{parentName:"ul"},"A small number of faulty (authorized) nodes must not be able to slow down the\nsystem or make it stop working")),(0,r.kt)("p",null,"The blockchain component supports these functions:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"add_transaction(payload, callback) to request the addition of a new transaction"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"called by the transparency log service (payload can contain operation=add_artifact,\nadd_node, etc)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"the blockchain component receives this call, builds a block and communicates\nwith other authorized nodes"),(0,r.kt)("li",{parentName:"ul"},"if a consensus is reached, commit a new block"),(0,r.kt)("li",{parentName:"ul"},"if a new block is committed, the blockchain module broadcasts the event add_block\non the p2p network"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"add_block_listener(callback): to register a listener for new payloads that reached\nconsensus."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"this function is used by the transparency log service"),(0,r.kt)("li",{parentName:"ul"},"so it receives the payload of every committed payload"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"when an authorized Pyrsia node needs to verify a block to reach consensus,\nthe blockchain component will use the verification service to verify the payload\nof each transaction in the block. It's the responsibility of the verification\nservice to inspect the payload and perform the necessary steps (e.g. start\na build and verify its output)"))),(0,r.kt)("h3",{id:"verification-service"},"Verification service"),(0,r.kt)("p",null,"The verification service is a component only used by authorized nodes. It implements all\nnecessary logic to verify blockchain transactions."),(0,r.kt)("p",null,"The verification service supports this function:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"verify_transaction")," verifies a transaction based on its payload \\\nthis function is called by the blockchain component to try and reach consensus\non a transaction that was added by another authorized node by verifying the payload\nof that transaction.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"based on the transparency log operation",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"if ",(0,r.kt)("inlineCode",{parentName:"li"},"add_node"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"if the node was previously marked as a authorized node candidate, agree\nto the transaction"),(0,r.kt)("li",{parentName:"ul"},"if not, do not agree to the transaction"))),(0,r.kt)("li",{parentName:"ul"},"if ",(0,r.kt)("inlineCode",{parentName:"li"},"add_artifact")," perform these steps:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"based on the package type (from the transparency log)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"start a build using the build service and wait for the result"),(0,r.kt)("li",{parentName:"ul"},"when the build finishes, hash the binary and source artifacts and compare\nthem to the hashes in the transparency log",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"simple hashing might not be sufficient for non-reproducible builds"),(0,r.kt)("li",{parentName:"ul"},"if the hashes match, return success to the caller of this function"),(0,r.kt)("li",{parentName:"ul"},"TDB: how do we make sure all authorized nodes will store the build\nresult?")))))))))))),(0,r.kt)("h3",{id:"build-service"},"Build service"),(0,r.kt)("p",null,"The build service is a component only used by authorized nodes. It is the entry\npoint to the authorized node's build pipeline infrastructure."),(0,r.kt)("p",null,"The builds service supports this function:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"start a build based on the package type and the PSID \\\nthis function is typically called from the CLI component when a build from\nsource was requested by a user.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"based on the package type it will:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"map the PSID to a source repo (if necessary)"),(0,r.kt)("li",{parentName:"ul"},"find a suitable build pipeline and trigger a build"),(0,r.kt)("li",{parentName:"ul"},"wait for the build result"),(0,r.kt)("li",{parentName:"ul"},"when the build finishes, hash the binary artifact and the source artifact",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"one build might produce multiple (Pyrsia) artifacts"),(0,r.kt)("li",{parentName:"ul"},"for non-reproducible builds simple hashing will not be sufficient"))),(0,r.kt)("li",{parentName:"ul"},"return the build result (could be multiple: one per artifact) to the caller\nof the ",(0,r.kt)("inlineCode",{parentName:"li"},"start_build")," (this will need to be an async callback) \\\nthe build result contains:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"the binary artifact"),(0,r.kt)("li",{parentName:"ul"},"the source artifact"),(0,r.kt)("li",{parentName:"ul"},"the hash of the binary artifact"),(0,r.kt)("li",{parentName:"ul"},"the hash of the source artifact")))))))),(0,r.kt)("h2",{id:"technical-stories-and-details"},"Technical stories and details"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"As a user I can use Docker client to pull an official Docker image from the Pyrsia\nnetwork."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"a Pyrsia node handles incoming requests from a Docker client ",(0,r.kt)("strong",{parentName:"p"},"[DOCKER_REGISTRY]")),(0,r.kt)("p",{parentName:"li"},"This is the implementation of the Docker Registry API so a Docker client can\nseamlessly integrate with the Pyrsia node.")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"As a user I can use a Java build tool like Maven to download Maven artifacts\nfrom the Pyrsia network."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"a Pyrsia node handles incoming requests from a maven client ",(0,r.kt)("strong",{parentName:"p"},"[JAVA_REPOSITORY]")),(0,r.kt)("p",{parentName:"li"},"This is the implementation of the Maven Repository API so several Java build\ntools can seamlessly integrate with the Pyrsia node.")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"When an artifact is requested, the node verifies the existence in the Pyrsia\nnetwork, and downloads it if necessary. ",(0,r.kt)("strong",{parentName:"p"},"[ARTIFACT_SERVICE]")),(0,r.kt)("p",{parentName:"li"},"When an artifact is requested, the Artifact Service  will query the transparency\nlog component. If the artifact exists (so if a log exists) the transparency log\nwill contain a reference to the required p2p file.\nThe artifact service will then lookup this file in its local storage, or download\nit from the p2p network.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Any Pyrsia node that downloaded an artifact provides that artifact on the\nnetwork for other nodes to download. ",(0,r.kt)("strong",{parentName:"p"},"[ARTIFACT_SERVICE]"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"As a user I can configure my Pyrsia node to limit the network bandwidth usage\nor even disable downloads from other nodes. ",(0,r.kt)("strong",{parentName:"p"},"[ARTIFACT_SERVICE]"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"As a Pyrsia node, I provide my locally stored artifacts in the Pyrsia network\nat boot. ",(0,r.kt)("strong",{parentName:"p"},"[ARTIFACT_SERVICE]"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"As a user behind a NAT router, my node can participate in het Pyrsia network\n",(0,r.kt)("strong",{parentName:"p"},"[P2P]")),(0,r.kt)("p",{parentName:"li"},"In order to participate in a distributed peer-to-peer network, nodes need to be\nreachable by other nodes. This can be a challenge when a node is run behind a\nNAT router. There are multiple ways of NAT traversal like TCP hole punching\nthat Pyrsia will try to accomplish. However, Pyrsia nodes will not relay\ntraffic if none of the other traversal methods worked. In that case, the\nPyrsia node can simply download artifacts from one or more of the authorized\nnodes, which will by definition always contain all the data.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"As a user I can use the Pyrsia CLI to show the transparency log. ",(0,r.kt)("strong",{parentName:"p"},"[CLI]")),(0,r.kt)("p",{parentName:"li"},"including search on author/dependencies/...")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"New authorized nodes can be added to the Pyrsia network. ",(0,r.kt)("strong",{parentName:"p"},"[CLI]"),"\n",(0,r.kt)("strong",{parentName:"p"},"[TRANSPARENCY_LOG]")," ",(0,r.kt)("strong",{parentName:"p"},"[BLOCKCHAIN]")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"As an authorized node admin I can add a candidate authorized node"),(0,r.kt)("p",{parentName:"li"},"The authorized node marks the new node id as an authorized node 'candidate'\nand creates an ",(0,r.kt)("inlineCode",{parentName:"p"},"AddNode")," transaction request and waits for consensus.\nConsensus might not be reached yet, but the authorized node keeps the\ncandidate so a future transaction request from another authorized node might\nreach consensus.")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"As a user I can request the addition of an official Docker Hub image to the\nPyrsia network. ",(0,r.kt)("strong",{parentName:"p"},"[CLI]")," ",(0,r.kt)("strong",{parentName:"p"},"[ARTIFACT_MANAGER]")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},'The Pyrsia node accepts "Docker image add requests" and as a result starts\nbuild pipeline and adds a Transaction request.'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"As a user I can request a build from source of a specific artifact, so it is\nadded to the Pyrsia network ",(0,r.kt)("strong",{parentName:"p"},"[CLI]")," ",(0,r.kt)("strong",{parentName:"p"},"[ARTIFACT_MANAGER]")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},'The Pyrsia node accepts " Build from source requests" and as a result\nstarts build pipeline and adds a Transaction request.'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"When a Transaction request is received all authorized nodes participate in the\nconsensus mechanism ",(0,r.kt)("strong",{parentName:"p"},"[BLOCKCHAIN]")),(0,r.kt)("p",{parentName:"li"},"Other authorized nodes validate transactions based on the transaction's operation\ntype. Examples of transaction operations:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"AddNode"),": to add a new authorized node. see 'AddNode transaction requests\nare handled'"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"RemoveNode"),": to add a new authorized node. see 'RemoveNode transaction\nrequests are handled'"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"AddArtifact"),": to add a new artifact. see 'AddArtifact transaction\nrequests are handled'"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"AddNode transaction requests are handled ",(0,r.kt)("strong",{parentName:"p"},"[BLOCKCHAIN]"),"\nan ",(0,r.kt)("inlineCode",{parentName:"p"},"AddNode")," transaction requests follows this procedure:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"was the node previously marked as an authorized node candidate?"),(0,r.kt)("li",{parentName:"ul"},"if yes, the authorized node answers positively in the consensus algorithm"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"RemoveNode transaction requests are handled ",(0,r.kt)("strong",{parentName:"p"},"[BLOCKCHAIN]")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"was the node previously marked as an authorized node candidate for removal?"),(0,r.kt)("li",{parentName:"ul"},"if yes, the authorized node answers positively in the consensus algorithm"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"AddArtifact transaction requests are handled ",(0,r.kt)("strong",{parentName:"p"},"[BLOCKCHAIN]"),"\nThe AddArtifact transaction request triggers a build verification using the\nBuild Service. The response of the Build Service defines the authorized\nnode's answer in the consensus algorithm.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"When consensus is reached, the transaction is committed to the blockchain.\n",(0,r.kt)("strong",{parentName:"p"},"[BLOCKCHAIN]")),(0,r.kt)("p",{parentName:"li"},"As a result, all nodes must receive new transactions. The authorized nodes store\nthe artifact locally and provide it in the p2p network.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"When a build is started, the Build Service finds a corresponding build pipeline\nsuitable to run the build. ",(0,r.kt)("strong",{parentName:"p"},"[BUILD_SERVICE]"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"When a build result is returned from a pipeline, the build service verifies\nthe generated build (part 1: for reproducible builds) ",(0,r.kt)("strong",{parentName:"p"},"[BUILD_SERVICE]"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"When a build result is returned from a pipeline, the build service verifies\nthe generated build by doing a semantic analysis (part 2: for non-reproducible\nbuilds) ",(0,r.kt)("strong",{parentName:"p"},"[BUILD_SERVICE]"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"On any Pyrsia node, when a new transaction is received, it is added to the\ntransparency log so it can be used in verification scenarios\n",(0,r.kt)("strong",{parentName:"p"},"[TRANSPARENCY_LOG]"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"As a Pyrsia node, I make sure the transparency log is up-to-date when I\nboot. ",(0,r.kt)("strong",{parentName:"p"},"[TRANSPARENCY_LOG]"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"As a Pyrsia node, I make sure the transparency log is kept up-to-date while\nrunning. ",(0,r.kt)("strong",{parentName:"p"},"[TRANSPARENCY_LOG]"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"As a Pyrsia node, I can download an artifact from multiple other nodes\nsimultaneously. ",(0,r.kt)("strong",{parentName:"p"},"[P2P]"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"As a user I can measure the download via Pyrsia is faster than from a central\nrepository. (benchmark) ",(0,r.kt)("strong",{parentName:"p"},"[P2P]"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"As a user I can use Docker Desktop to install Pyrsia (Docker Desktop Pyrsia)\n",(0,r.kt)("strong",{parentName:"p"},"[INSTALLATION]"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"As a user I can use a package manager on Ubuntu to install Pyrsia ",(0,r.kt)("strong",{parentName:"p"},"[INSTALLATION]")))))}h.isMDXComponent=!0},11748:function(e,t,a){var n={"./locale":89234,"./locale.js":89234};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=11748},81054:function(e,t,a){"use strict";t.Z=a.p+"assets/images/pyrsia-network1-fafabb5afec331d6ec7f4f42a358a3cb.png"},55270:function(e,t,a){"use strict";t.Z=a.p+"assets/images/pyrsia-network2-829178860d702c11acd442a1b307fb46.png"},57934:function(e,t,a){"use strict";t.Z=a.p+"assets/images/pyrsia-node-high-level-components-c35747e09ef2029f426b61c182ec4a8b.png"}}]);