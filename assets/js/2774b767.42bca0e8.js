"use strict";(self.webpackChunkpyrsia=self.webpackChunkpyrsia||[]).push([[2005],{12332:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return l},metadata:function(){return u},toc:function(){return d}});var a=n(87462),o=n(63366),r=(n(67294),n(3905)),i=(n(8209),["components"]),l={custom_edit_url:"https://github.com/pyrsia/pyrsia/blob/main/docs/community/get_involved/local_dev_setup.md"},s="Setup your development environment",u={unversionedId:"community/get_involved/local_dev_setup",id:"community/get_involved/local_dev_setup",title:"Setup your development environment",description:"Pyrsia uses Rust programming language and will require you to setup Rust and it's dependencies.",source:"@site/docs/community/get_involved/local_dev_setup.md",sourceDirName:"community/get_involved",slug:"/community/get_involved/local_dev_setup",permalink:"/docs/community/get_involved/local_dev_setup",draft:!1,editUrl:"https://github.com/pyrsia/pyrsia/blob/main/docs/community/get_involved/local_dev_setup.md",tags:[],version:"current",frontMatter:{custom_edit_url:"https://github.com/pyrsia/pyrsia/blob/main/docs/community/get_involved/local_dev_setup.md"},sidebar:"tutorialSidebar",previous:{title:"Good Pull Requests",permalink:"/docs/community/get_involved/good_pr"},next:{title:"New to Pyrsia",permalink:"/docs/community/get_involved/onboarding"}},p={},d=[{value:"Download the Source Code",id:"download-the-source-code",level:2},{value:"Install Rust",id:"install-rust",level:2},{value:"Install System Dependencies",id:"install-system-dependencies",level:3},{value:"Build code and run tests",id:"build-code-and-run-tests",level:2},{value:"Pyrsia node docker image",id:"pyrsia-node-docker-image",level:2},{value:"Build the Pyrsia node docker image",id:"build-the-pyrsia-node-docker-image",level:3},{value:"Build the Pyrsia node docker image (if not present) and start the node",id:"build-the-pyrsia-node-docker-image-if-not-present-and-start-the-node",level:3},{value:"Simulate a network",id:"simulate-a-network",level:2},{value:"Interact using the CLI",id:"interact-using-the-cli",level:2}],c={toc:d};function m(e){var t=e.components,n=(0,o.Z)(e,i);return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"setup-your-development-environment"},"Setup your development environment"),(0,r.kt)("p",null,"Pyrsia uses ",(0,r.kt)("a",{parentName:"p",href:"https://www.rust-lang.org/"},"Rust programming language")," and will require you to setup Rust and it's dependencies."),(0,r.kt)("h2",{id:"download-the-source-code"},"Download the Source Code"),(0,r.kt)("p",null,"Clone the project repo"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"git clone https://github.com/pyrsia/pyrsia.git\n")),(0,r.kt)("p",null,"We will call this directory ",(0,r.kt)("inlineCode",{parentName:"p"},"$PYRSIA_HOME")),(0,r.kt)("h2",{id:"install-rust"},"Install Rust"),(0,r.kt)("p",null,"Setup rust on your local machine as described in ",(0,r.kt)("a",{parentName:"p",href:"https://www.rust-lang.org/learn/get-started"},"Rust's getting started guide"),".\nYou may also follow ",(0,r.kt)("a",{parentName:"p",href:"https://www.forrestthewoods.com/blog/how-to-debug-rust-with-visual-studio-code/"},"How to Debug Rust with Visual Studio Code"),"\nif you are looking to make code changes."),(0,r.kt)("h3",{id:"install-system-dependencies"},"Install System Dependencies"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Install Clang and OpenSSL"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"macOS: use ",(0,r.kt)("a",{parentName:"p",href:"https://brew.sh/"},"homebrew")," to install OpenSSL"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"brew install openssl@1.1\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Linux (ubuntu): use ",(0,r.kt)("inlineCode",{parentName:"p"},"apt")," to install Clang, OpenSSL and CMake and pkg-config"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"apt install clang libssl-dev cmake pkg-config\n"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Install protoc"),(0,r.kt)("p",{parentName:"li"},"Pyrsia has a dependency on the ",(0,r.kt)("inlineCode",{parentName:"p"},"libp2p")," crate which requires ",(0,r.kt)("inlineCode",{parentName:"p"},"protoc")," to be installed. For installation instructions,\nplease read the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/protocolbuffers/protobuf#protocol-compiler-installation"},"protobuf installation guide"),"."))),(0,r.kt)("h2",{id:"build-code-and-run-tests"},"Build code and run tests"),(0,r.kt)("p",null,"The base line is making sure all the code compiles and every test passes."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"cd $PYRSIA_HOME\ncargo build --all-targets\ncargo test --workspace\n")),(0,r.kt)("p",null,"These commands should run successfully. If you have issues with these please reach out to the team on slack and report an issue/submit a PR."),(0,r.kt)("h2",{id:"pyrsia-node-docker-image"},"Pyrsia node docker image"),(0,r.kt)("p",null,"Make sure ",(0,r.kt)("a",{parentName:"p",href:"https://docs.docker.com/engine/install/"},"Docker engine")," is installed (18.09 or higher) and running."),(0,r.kt)("h3",{id:"build-the-pyrsia-node-docker-image"},"Build the Pyrsia node docker image"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"cd $PYRSIA_HOME\nDOCKER_BUILDKIT=1 docker build -t=pyrsia/node .\n")),(0,r.kt)("p",null,'If everything works as expected, after a while, a new image "pyrsia/node" should appear in the docker images list.'),(0,r.kt)("h3",{id:"build-the-pyrsia-node-docker-image-if-not-present-and-start-the-node"},"Build the Pyrsia node docker image (if not present) and start the node"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"cd $PYRSIA_HOME\ndocker compose up\n")),(0,r.kt)("p",null,'If everything works as expected, a new docker container should be started using the "node/pyrsia" image.'),(0,r.kt)("h2",{id:"simulate-a-network"},"Simulate a network"),(0,r.kt)("p",null,"Once you have compiled the Pyrsia code you are ready to build a Pyrsia network for testing. Pyrsia nodes are run on a peer to peer network and will require port separation if you would like to run multiple nodes on the same computer."),(0,r.kt)("p",null,"Follow the instructions below to setup a test network."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Node 1:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"DEV_MODE=on PYRSIA_ARTIFACT_PATH=pyrsia cargo run --bin pyrsia_node -- -p 7888\n\n# RUST_LOG=debug DEV_MODE=on PYRSIA_ARTIFACT_PATH=pyrsia cargo run --bin pyrsia_node -- -p 7888 # Use this environment variable if you would like to see debug logs\n")))),(0,r.kt)("p",null,"Test the pyrsia_node status using ",(0,r.kt)("inlineCode",{parentName:"p"},"curl")," (notice the port number for Node 1)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"curl --location --request GET 'http://localhost:7888/status'\n")),(0,r.kt)("p",null,"In a real life deployment these nodes will be spread over the network and will all run on their own 7888 port."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Node 2:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"DEV_MODE=on PYRSIA_ARTIFACT_PATH=pyrsia cargo run --bin pyrsia_node -- -p 7889\n\n# RUST_LOG=debug DEV_MODE=on PYRSIA_ARTIFACT_PATH=pyrsia cargo run --bin pyrsia_node -- -p 8181 # Use this environment variable if you would like to see debug logs\n")))),(0,r.kt)("p",null,"Test the pyrsia_node status using ",(0,r.kt)("inlineCode",{parentName:"p"},"curl")," (notice the port number for Node 2)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"curl --location --request GET 'http://localhost:7889/status'\n")),(0,r.kt)("p",null,"Now you have confirmed that the individual nodes are running."),(0,r.kt)("h2",{id:"interact-using-the-cli"},"Interact using the CLI"),(0,r.kt)("p",null,"You can use the Pyrsia CLI to ensure that the peers are connected."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Build the CLI tool"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"cd ../pyrsia_cli\ncargo build\ncd ../target/debug\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'Configure the CLI tool for your node using interactive subcommand "config"'),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"}," ./pyrsia config --add\n")),(0,r.kt)("p",{parentName:"li"},"OR place the config file in these OS specific locations:"),(0,r.kt)("p",{parentName:"li"},"Mac:  $HOME/Library/Preferences/rs.pyrsia-cli/pyrsia-cli.toml\nLinux: $HOME/.config/rs.pyrsia-cli/pyrsia-cli.toml or $XDG_CONFIG_HOME/rs.pyrsia-cli/pyrsia-cli.toml\nWindows: %APPDATA%","\\","Roaming","\\","pyrsia-cli","\\","config","\\","pyrsia-cli.toml")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Ping the Pyrsia node and list the status"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"$ ./pyrsia ping\nConnection Successfull !! {}\n")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'$ ./pyrsia -s\nConnected Peers Count:       1\nArtifacts Count:             3 {"manifests": 1, "blobs": 2}\nTotal Disk Space Allocated:  10 GB\nDisk Space Used:             0.0002%\n')))),(0,r.kt)("p",null,"If you see a status message similar to:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"Error: error sending request for url (http://localhost:7888/v2): error trying to connect: tcp connect error: Connection refused (os error 111)\n")),(0,r.kt)("p",null,"then your node is likely not running. Go back to step 3 to make sure the Pyrsia Node can be started."),(0,r.kt)("p",null,"Congratulations! You have now setup your developer environment and are ready to write code and submit a PR to Pyrsia. Head over to ",(0,r.kt)("a",{parentName:"p",href:"/docs/community/get_involved/contributing/"},"contributing guidelines")," to start contributing to the project."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u26a0\ufe0f Word of caution: Running the peers for a few hours does generate network traffic and hence can drain your computer power. Ensure you are plugged into power if you are running multiple peers for a long time`")))}m.isMDXComponent=!0}}]);