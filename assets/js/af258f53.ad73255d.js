(self.webpackChunkpyrsia=self.webpackChunkpyrsia||[]).push([[8948],{21164:function(e,t,a){"use strict";a.r(t),a.d(t,{assets:function(){return u},contentTitle:function(){return o},default:function(){return m},frontMatter:function(){return i},metadata:function(){return p},toc:function(){return d}});var r=a(87462),n=a(63366),s=(a(67294),a(3905)),l=(a(8209),["components"]),i={custom_edit_url:"https://github.com/pyrsia/pyrsia/blob/main/docs/developers/prerelease_manual_tests.md",sidebar_position:5},o="Pre-release checks",p={unversionedId:"developers/prerelease_manual_tests",id:"developers/prerelease_manual_tests",title:"Pre-release checks",description:"Before a release, make sure to",source:"@site/docs/developers/prerelease_manual_tests.md",sourceDirName:"developers",slug:"/developers/prerelease_manual_tests",permalink:"/docs/developers/prerelease_manual_tests",draft:!1,editUrl:"https://github.com/pyrsia/pyrsia/blob/main/docs/developers/prerelease_manual_tests.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{custom_edit_url:"https://github.com/pyrsia/pyrsia/blob/main/docs/developers/prerelease_manual_tests.md",sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"How to start and debug Pyrsia Node using IDE",permalink:"/docs/developers/setting_up_ide"},next:{title:"Post-release manual tests",permalink:"/docs/developers/postrelease_manual_tests"}},u={},d=[{value:"Terminal A",id:"terminal-a",level:2},{value:"Terminal B",id:"terminal-b",level:2},{value:"Terminal C",id:"terminal-c",level:2},{value:"Terminal D",id:"terminal-d",level:2}],c={toc:d};function m(e){var t=e.components,a=(0,n.Z)(e,l);return(0,s.kt)("wrapper",(0,r.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"pre-release-checks"},"Pre-release checks"),(0,s.kt)("p",null,"Before a release, make sure to"),(0,s.kt)("ul",{className:"contains-task-list"},(0,s.kt)("li",{parentName:"ul",className:"task-list-item"},(0,s.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","run the integration tests"),(0,s.kt)("li",{parentName:"ul",className:"task-list-item"},(0,s.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","start Pyrsia on every suppored platform",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"Windows"),(0,s.kt)("li",{parentName:"ul"},"Linux"),(0,s.kt)("li",{parentName:"ul"},"MacOS"),(0,s.kt)("li",{parentName:"ul"},"Docker"))),(0,s.kt)("li",{parentName:"ul",className:"task-list-item"},(0,s.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","run the following manual checks on a network of local nodes")),(0,s.kt)("h2",{id:"terminal-a"},"Terminal A"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"cargo build --workspace\nmkdir -p /tmp/pyrsia-manual-tests/nodeA\nmkdir -p /tmp/pyrsia-manual-tests/nodeB\ncp target/debug/pyrsia_node /tmp/pyrsia-manual-tests/nodeA\ncp target/debug/pyrsia_node /tmp/pyrsia-manual-tests/nodeB\ncd /tmp/pyrsia-manual-tests/nodeA\nRUST_LOG=pyrsia=debug DEV_MODE=on ./pyrsia_node --pipeline-service-endpoint http://localhost:8080  --listen-only -H 0.0.0.0 -p 7881 --init-blockchain\n")),(0,s.kt)("h2",{id:"terminal-b"},"Terminal B"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"cd /tmp/pyrsia-manual-tests/nodeB\nRUST_LOG=debug ./pyrsia_node --bootstrap-url http://localhost:7881/status -p 7882\n")),(0,s.kt)("h2",{id:"terminal-c"},"Terminal C"),(0,s.kt)("p",null,"Go to the build pipeline prototype repo and run"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"cargo run\n")),(0,s.kt)("h2",{id:"terminal-d"},"Terminal D"),(0,s.kt)("p",null,"First authorize node A"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"NODE_A_PEER_ID=`curl -s http://localhost:7881/status | jq -r .peer_id`\necho $NODE_A_PEER_ID\n./target/debug/pyrsia config -e --port 7881\n./target/debug/pyrsia authorize --peer $NODE_A_PEER_ID\n")),(0,s.kt)("p",null,"Then configure to use node B from now on:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"./target/debug/pyrsia config -e --port 7882\n")),(0,s.kt)("p",null,"Then trigger a build:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"./target/debug/pyrsia build docker --image alpine:3.16.0\n")),(0,s.kt)("p",null,"And inspect the logs:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"./target/debug/pyrsia inspect-log docker --image alpine:3.16.0\n")),(0,s.kt)("p",null,"... test any of the newly added features ..."))}m.isMDXComponent=!0},11748:function(e,t,a){var r={"./locale":89234,"./locale.js":89234};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=s,e.exports=n,n.id=11748}}]);