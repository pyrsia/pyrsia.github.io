"use strict";(self.webpackChunkpyrsia=self.webpackChunkpyrsia||[]).push([[8948],{21164:function(e,t,a){a.r(t),a.d(t,{assets:function(){return u},contentTitle:function(){return p},default:function(){return m},frontMatter:function(){return i},metadata:function(){return o},toc:function(){return d}});var r=a(87462),s=a(63366),n=(a(67294),a(3905)),l=(a(8209),["components"]),i={custom_edit_url:"https://github.com/pyrsia/pyrsia/blob/main/docs/developers/prerelease_manual_tests.md"},p="Pre-release checks",o={unversionedId:"developers/prerelease_manual_tests",id:"developers/prerelease_manual_tests",title:"Pre-release checks",description:"Before a release, make sure to",source:"@site/docs/developers/prerelease_manual_tests.md",sourceDirName:"developers",slug:"/developers/prerelease_manual_tests",permalink:"/docs/developers/prerelease_manual_tests",draft:!1,editUrl:"https://github.com/pyrsia/pyrsia/blob/main/docs/developers/prerelease_manual_tests.md",tags:[],version:"current",frontMatter:{custom_edit_url:"https://github.com/pyrsia/pyrsia/blob/main/docs/developers/prerelease_manual_tests.md"},sidebar:"tutorialSidebar",previous:{title:"Post-release manual tests",permalink:"/docs/developers/postrelease_manual_tests"},next:{title:"Creating a Release for Pyrsia",permalink:"/docs/developers/release_process"}},u={},d=[{value:"Terminal A",id:"terminal-a",level:2},{value:"Terminal B",id:"terminal-b",level:2},{value:"Terminal C",id:"terminal-c",level:2},{value:"Terminal D",id:"terminal-d",level:2}],c={toc:d};function m(e){var t=e.components,a=(0,s.Z)(e,l);return(0,n.kt)("wrapper",(0,r.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"pre-release-checks"},"Pre-release checks"),(0,n.kt)("p",null,"Before a release, make sure to"),(0,n.kt)("ul",{className:"contains-task-list"},(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","run the integration tests"),(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","start Pyrsia on every suppored platform",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Windows"),(0,n.kt)("li",{parentName:"ul"},"Linux"),(0,n.kt)("li",{parentName:"ul"},"MacOS"),(0,n.kt)("li",{parentName:"ul"},"Docker"))),(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","run the following manual checks on a network of local nodes")),(0,n.kt)("h2",{id:"terminal-a"},"Terminal A"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"cargo build --workspace\nmkdir -p /tmp/pyrsia-manual-tests/nodeA\nmkdir -p /tmp/pyrsia-manual-tests/nodeB\ncp target/debug/pyrsia_node /tmp/pyrsia-manual-tests/nodeA\ncp target/debug/pyrsia_node /tmp/pyrsia-manual-tests/nodeB\ncd /tmp/pyrsia-manual-tests/nodeA\nRUST_LOG=pyrsia=debug DEV_MODE=on ./pyrsia_node --pipeline-service-endpoint http://localhost:8080  --listen-only -H 0.0.0.0 -p 7881 --init-blockchain\n")),(0,n.kt)("h2",{id:"terminal-b"},"Terminal B"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"cd /tmp/pyrsia-manual-tests/nodeB\nRUST_LOG=debug ./pyrsia_node --bootstrap-url http://localhost:7881/status -p 7882\n")),(0,n.kt)("h2",{id:"terminal-c"},"Terminal C"),(0,n.kt)("p",null,"Go to the build pipeline prototype repo and run"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"cargo run\n")),(0,n.kt)("h2",{id:"terminal-d"},"Terminal D"),(0,n.kt)("p",null,"First authorize node A"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"NODE_A_PEER_ID=`curl -s http://localhost:7881/status | jq -r .peer_id`\necho $NODE_A_PEER_ID\n./target/debug/pyrsia config -e --port 7881\n./target/debug/pyrsia authorize --peer $NODE_A_PEER_ID\n")),(0,n.kt)("p",null,"Then configure to use node B from now on:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"./target/debug/pyrsia config -e --port 7882\n")),(0,n.kt)("p",null,"Then trigger a build:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"./target/debug/pyrsia build docker --image alpine:3.16.0\n")),(0,n.kt)("p",null,"And inspect the logs:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"./target/debug/pyrsia inspect-log docker --image alpine:3.16.0\n")),(0,n.kt)("p",null,"... test any of the newly added features ..."))}m.isMDXComponent=!0}}]);